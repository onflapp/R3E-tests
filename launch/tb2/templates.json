{
  "_pt": "resource/templates",
  "web": {
    "page": {
      "default.hbs": {
        "_ct": "text/plain",
        "_pt": "resource/content",
        "_content": "<h1>{{_.title}}</h1><p>this is very simple, non-HTML-compliant page</p>"
      }
    }
  },
  "db": {
    "modified_date": "Tue Jan 31 2023 22:01:45 GMT+0100 (Central European Standard Time)",
    "groups": {
      "modified_date": "Tue Jan 31 2023 22:04:21 GMT+0100 (Central European Standard Time)",
      "default.hbs": {
        "_ct": "text/plain",
        "_pt": "resource/content",
        "_content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n  <meta charset=\"utf-8\">\n  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n  <link rel=\"icon\" href=\"data:;base64,iVBORw0KGgo=\">\n  \n{{include_css \"db/test.css\"}}\n\n  <title>groups</title>\n</head>\n\n<body>\n  <h1>Groups</h1>\n  \n  groups:\n{{#include \".\" \"children\"}}\n  <div>\n    group:<a href=\"{{req_path path}}\"> {{_.title}}</a> \n          <a href=\"{{req_path path \"res-delete\"}}\">d</a>\n          <a href=\"{{req_path path \"config\"}}\">c</a>         \n  </div>\n{{/include}}\n\n  <form method=\"post\" action=\"{{res_path \".\" \"{:name}\"}}\">\n    <input name=\"title\" value=\"\" autocomplete=\"off\" placeholder=\"title\">\n    <input type=\"hidden\" name=\":name|newUUID\" value=\"\">\n    <input type=\"hidden\" name=\":forward\" value=\"{{req_path \".\"}}\">\n    <input type=\"hidden\" name=\"_rt\" value=\"db/group\">\n    <button type=\"submit\">add</button>\n  </form>\n\n</body>\n</html>\n"
      }
    },
    "item": {
      "modified_date": "Tue Jan 31 2023 22:09:54 GMT+0100 (Central European Standard Time)",
      "field": {
        "modified_date": "Wed Feb 01 2023 12:34:57 GMT+0100 (Central European Standard Time)",
        "value": {
          "modified_date": "Thu Feb 02 2023 21:52:40 GMT+0100 (Central European Standard Time)",
          "group-item.js": {
            "_ct": "text/javascript",
            "_pt": "resource/content",
            "_content": "(async function (res, writer, ctx) {\n  writer.start('object/javascript');\n\n  let path = res['path'];\n  let name = res['name'];\n  let base = '/content/db';\n\n  let rpath = base+\"/\"+res._['group_ref']+'/'+res._['item_ref'];\n\n  let map = await ctx.resolveResource(rpath);\n  if (map) {\n    map['ref'] = rpath;\n  }\n  writer.write(map);\n  writer.end();\n});"
          },
          "edit.hbs": {
            "_ct": "text/plain",
            "_pt": "resource/content",
            "_content": "{{#include \".\" \"group-item\"}}\n<a href=\"{{req_path ref \"\"}}\">{{_.title}}</a> [<a href=\"{{req_path ../path \"res-delete\"}}\">X</a>]\n{{/include}}\n"
          }
        },
        "group-config-field.js": {
          "_ct": "text/javascript",
          "_pt": "resource/content",
          "_content": "(async function (res, writer, ctx) {\n  writer.start('object/javascript');\n\n  let path = res['path'];\n  let name = res['name'];\n  let base = Utils.absolute_path(path+'/../..');\n\n  let cpath = base+\"/config/\"+name;\n\n  let map = await ctx.resolveResource(cpath);\n  if (map) {\n    map['ref'] = '/content/db/'+map._['group_ref'];\n  }\n  writer.write(map);\n  writer.end();\n});"
        },
        "edit.hbs": {
          "_ct": "text/plain",
          "_pt": "resource/content",
          "_content": "<div>\n{{#include \".\" \"db/item/field\" \"group-config-field\"}}\n\n<a href=\"{{req_path ref}}\">{{_.title}}</a>:\n{{#include \".\" \"children\"}}\n  {{include path}}\n{{/include}}\n\n  <form method=\"post\" action=\"{{res_path \".\"}}/{item_ref}\" class=\"ui-inline\">\n    <input type=\"hidden\" name=\"item_ref|newUUID\" value=\"\">\n    <input type=\"hidden\" name=\"group_ref\" value=\"{{_.group_ref}}\">\n    <input type=\"hidden\" name=\"_rt\" value=\"db/item/field/value\">\n    <input type=\"hidden\" name=\":forward\" value=\"{{req_path \".\" \"\"}}\">\n    <button class=\"act-popup\" name=\"item_ref\" data-path=\"{{req_path ref \"choose-path\"}}\" type=\"button\">add</button>\n  </form>\n\n{{/include}}\n</div>"
        },
        "date": {
          "_md": "1680245353087",
          "edit.hbs": {
            "_ct": "text/plain",
            "_pt": "resource/content",
            "_content": "<div>\n\n{{#include \".\" \"db/item/field\" \"group-config-field\"}}\n\n{{_.title}}:\n\n  <form method=\"post\" action=\"{{res_path \".\"}}\" class=\"ui-inline\">\n    <input type=\"date\" name=\"date_value\" value=\"{{../_.date_value}}\">\n    <input type=\"hidden\" name=\":forward\" value=\"{{req_path \".\" \"\"}}\">\n    <button type=\"submit\">set</button>\n  </form>\n\n{{/include}}\n</div>"
          }
        },
        "bool": {
          "_md": "1680448052172",
          "edit.hbs": {
            "_ct": "text/plain",
            "_pt": "resource/content",
            "_content": "<div>\n\n{{#include \".\" \"db/item/field\" \"group-config-field\"}}\n\n{{_.title}}:\n\n  <form method=\"post\" action=\"{{res_path \".\"}}\" class=\"ui-inline\">\n    <input type=\"checkbox\" name=\"bool_value\" {{and ../_.bool_value \"checked\"}}>\n    <input type=\"hidden\" name=\":forward\" value=\"{{req_path \".\" \"\"}}\">\n    <button type=\"submit\">set</button>\n  </form>\n\n{{/include}}\n</div>"
          }
        }
      },
      "find-this-item.js": {
        "_ct": "text/javascript",
        "_pt": "resource/content",
        "_content": "(async function (res, writer, ctx) {\n  writer.start('object/javascript');\n\n  let path = res['path'];\n  let name = res['name'];\n  let base = '/content/db';\n  let rv = [];\n\n  await ctx.listAllResourceNames(base, function(it) {\n    let n = Utils.filename(it);\n    let i = it.indexOf('/db_group_config_field_');\n\n    if (i > 0 && n == name) {\n      let p = base+it.substr(0, i);\n      rv.push({\n        name:n,\n        group:Utils.filename(Utils.filename_dir(p)),\n        path:p\n      });\n    }\n  });\n\n  writer.write(rv);\n  writer.end();\n});"
      },
      "field-values.js": {
        "_ct": "text/javascript",
        "_pt": "resource/content",
        "_content": "(async function (res, writer, ctx) {\n  writer.start('object/javascript');\n\n  let rv = [];\n  let path = res['path'];\n  let fields = [];\n\n  await ctx.listAllResourceNames(path, function(it) {\n    let n = Utils.filename(it);\n    if (n.indexOf('db_item_') == 0) {\n      fields.push(it);\n    }\n  });\n\n  for (let i = 0; i < fields.length; i++ ) {\n    let fp = path+'/'+fields[i];\n    let fres = await ctx.resolveResource(fp);\n    if (fres) {\n      rv.push(fres);\n    }\n  }\n  \n  writer.write(rv);\n  writer.end();\n});"
      },
      "default.hbs": {
        "_ct": "text/plain",
        "_pt": "resource/content",
        "_content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n  <meta charset=\"utf-8\">\n  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n  <link rel=\"icon\" href=\"data:;base64,iVBORw0KGgo=\">\n\n  {{include_js \"resource/node/dev-tools.js\" \"db/cash.min.js\" \"db/ui.js\" \"db/components.js\"}}\n  {{include_css \"db/ui.css\"}}\n\n  <title>fields</title>\n</head>\n\n<body>\n  <a href=\"{{req_path \"/content/db\"}}\">db</a>\n\n{{#include \"..\" \"properties\"}}\n  <h1>{{../_.title}} - <a href=\"{{req_path \"../\" \"\"}}\">{{title}}</a></h1>\n  <a href=\"{{req_path \"../\" \"config\"}}\">config</a>\n{{/include}}\n\n  <form method=\"post\" action=\"{{res_path \".\"}}\">\n    <input name=\"title\" value=\"{{_.title}}\" autocomplete=\"off\" placeholder=\"title\">\n    <input type=\"hidden\" name=\":forward\" value=\"{{req_path \".\"}}\">\n    <button type=\"submit\">rename</button>\n  </form>\n\n  <form method=\"post\" action=\"{{res_path \".\"}}\">\n    <select name=\":group_path\">\n{{#include \"/content/db\" \"children\"}}\n      <option value=\"/content/db/{{name}}\">{{_.title}}</option>\n{{/include}}\n    </select>\n    <input type=\"hidden\" name=\":moveto\" value=\"{:group_path}/{{name}}\">\n    <input type=\"hidden\" name=\":forward\" value=\"{{req_path}}{:group_path}\">\n    <button type=\"submit\">move</button>\n  </form>\n\n  <form method=\"post\" action=\"{{res_path \".\"}}\">\n    <input type=\"hidden\" name=\"_rt\" value=\"db/item\">\n    <input type=\"hidden\" name=\"title\" value=\"{{_.title}} Clone\">\n    <input type=\"hidden\" name=\":name|newUUID\" value=\"\">\n    <input type=\"hidden\" name=\":copyto\" value=\"../{:name}\">\n    <input type=\"hidden\" name=\":forward\" value=\"{{req_path \"../{:name}\"}}\">\n    <button type=\"submit\">clone</button>\n  </form>\n\n  <h5>fields:</h5>\n\n{{#include \".\" \"configured-fields\"}}\n  {{include path field_type \"edit\"}}\n{{/include}}\n\n  <form method=\"post\" action=\"{{res_path R.PATH}}\">\n    <a target=\"_blank\" href=\"{{_.ext_ref}}\">external</a> ref: <input name=\"ext_ref\" value=\"{{_.ext_ref}}\" autocomplete=\"off\" placeholder=\"url\">\n    <input type=\"hidden\" name=\":forward\" value=\"{{req_path \".\"}}\">\n    <button type=\"submit\">save</button>\n  </form>\n\n  <form method=\"post\" action=\"{{res_path R.PATH}}\">\n    note: <input name=\"note\" value=\"{{_.note}}\" autocomplete=\"off\" placeholder=\"note\">\n    <input type=\"hidden\" name=\":forward\" value=\"{{req_path \".\"}}\">\n    <button type=\"submit\">save</button>\n  </form>\n\n{{#include \"..\" \"find-ref-groups\"}}\n  <h3>{{_.title}} <a href=\"{{req_path path}}?filter_item={{../R.NAME}}\">group</a></h3>\n\n  {{set_Q \"filter_item\" ../R.NAME}}\n  {{include path \"t-items-table\"}}\n\n  <form method=\"post\" action=\"{{path}}/{:name}\">\n    <input type=\"hidden\" name=\":name|newUUID\" value=\"\">\n    <input type=\"hidden\" name=\"_rt\" value=\"db/item\">\n    <input type=\"text\" name=\"title\" value=\"\">\n\n  {{set_Q \"group_ref\" ../R.PARENT_NAME}}\n  {{set_Q \"item_ref\" ../R.NAME}}\n  {{#include path \"find-ref-config\"}}\n    <input type=\"hidden\" name=\"{{config_name}}/{{item_ref}}/group_ref\" value=\"{{group_ref}}\">\n    <input type=\"hidden\" name=\"{{config_name}}/{{item_ref}}/item_ref\" value=\"{{item_ref}}\">\n    <input type=\"hidden\" name=\"{{config_name}}/{{item_ref}}/_rt\" value=\"db/item/field/value\">\n  {{/include}}\n\n    <input type=\"hidden\" name=\":forward\" value=\"{{req_path \".\"}}\">    \n    <button type=\"submit\" name=\"\" value=\"\">add</button>\n  </form>\n\n{{/include}}\n\n</body>\n</html>\n"
      },
      "archive.js": {
        "_ct": "text/javascript",
        "_pt": "resource/content",
        "_content": "function mktok() {\n  let dt = new Date();\n  let rv = '';\n  let y = dt.getFullYear();\n  let m = dt.getMonth()+1;\n  let d = dt.getDate();\n  let h = dt.getHours();\n  let x = dt.getMinutes();\n\n  rv += y;\n  if (m < 10) rv += '0';\n  rv += m;\n  if (d < 10) rv += '0';\n  rv += d;\n  rv += '-';\n  if (h < 10) rv += '0';\n  rv += h;\n  if (x < 10) rv += '0';\n  rv += x;\n\n  return rv;\n}\n\n(async function (res, writer, ctx) {\n  let path = res['path'];\n  let name = res['name'];\n  let tok = mktok();\n  let gpath = Utils.filename_dir(path);\n  let gname = Utils.filename(gpath);\n  let arch = `/content/ar/${name}/${tok}`;\n\n  await ctx.storeResource(`${gpath}`, {\n    ':cloneto':`${arch}/${gname}`,\n    '../ref':`${gname}/${name}`\n  });\n\n  await ctx.storeResource(`${gpath}/config`, {\n    ':copyto':`${arch}/${gname}/config`\n  });\n\n  await ctx.storeResource(path, {\n    ':copyto':`${arch}/${gname}/${name}`\n  });\n\n});\n"
      },
      "t-archived-items.hbs": {
        "_ct": "text/plain",
        "_pt": "resource/content",
        "_content": "<h3>previous</h3>\n\n{{#include \".\" \"find-archived-items\"}}\n<div>\n  <a href=\"{{req_path item_ref}}\">{{name}}</a>\n</div>\n{{/include}}"
      },
      "find-archived-items.js": {
        "_ct": "text/javascript",
        "_pt": "resource/content",
        "_content": "(async function (res, writer, ctx) {\n  writer.start('object/javascript');\n\n  let path = res['path'];\n  let name = res['name'];\n  let base = `/content/ar/${name}`;\n  let rv = await ctx.listResources(base);\n\n  for (let i = 0; i < rv.length; i++) {\n    let item = rv[i];\n    item['item_ref'] = item['path'] + '/' + item._['ref'];\n  }\n\n  writer.write(rv);\n  writer.end();\n});"
      },
      "configured-fields.js": {
        "_ct": "text/javascript",
        "_pt": "resource/content",
        "_content": "(async function (res, writer, ctx) {\n  writer.start('object/javascript');\n\n  let path = res['path'];\n  let base = Utils.filename_dir(path);\n  let children = await ctx.listResources(base+'/config');\n  let rv = [];\n\n  if (children) {\n    children.forEach(function(it) {\n      let fpath = Utils.filename_path_append(path, it['name']);\n      let fres = it['_'];\n      let ftype = fres['field_type'];\n      if (!ftype) ftype = 'db/item/field';\n\n      fres['field_type'] = ftype;\n      fres['path'] = fpath;\n      rv.push(fres);\n    });\n  }  \n  writer.write(rv);\n  writer.end();\n});"
      }
    },
    "group": {
      "modified_date": "Wed Feb 01 2023 08:54:06 GMT+0100 (Central European Standard Time)",
      "config.js": {
        "_ct": "text/javascript",
        "_pt": "resource/content",
        "_content": "(async function (res, writer, ctx) {\n  let path = res['path'] + '/config';\n  await ctx.storeResource(path, {\n    title: res._['title'], \n   _rt:'db/group/config' \n  });\n\n  ctx.forwardRequest(path);\n});\n"
      },
      "config": {
        "modified_date": "Wed Feb 01 2023 09:19:19 GMT+0100 (Central European Standard Time)",
        "default.hbs": {
          "_ct": "text/plain",
          "_pt": "resource/content",
          "_content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n  <meta charset=\"utf-8\">\n  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n  <link rel=\"icon\" href=\"data:;base64,iVBORw0KGgo=\">\n\n  <title>groups</title>\n</head>\n\n<body>\n  <h1>Group Config {{_.title}}</h1>\n  <form method=\"post\" action=\"{{res_path \"..\"}}\">\n    <input name=\"title\" value=\"{{_.title}}\" autocomplete=\"off\" placeholder=\"title\">\n    <input type=\"hidden\" name=\"config/title\" value=\"{title}\">\n    <input type=\"hidden\" name=\":forward\" value=\"{{req_path \".\"}}\">\n    <button type=\"submit\">rename</button>\n  </form>\n\n  fields:\n{{#include \".\" \"children\"}}\n  <div>\n    config:<a href=\"{{req_path path}}\"> {{_.title}}</a> {{_.ref}} <a href=\"{{req_path path \"res-delete\"}}\">d</a>\n  </div>\n{{/include}}\n\n  <h3>ref table</h3>\n  <form method=\"post\" action=\"{{res_path \".\" \"{:name}\"}}\">\n    <select name=\"group_ref\">\n{{#include \"/content/db\" \"children\"}}\n      <option value=\"{{name}}\">{{_.title}}</option>\n{{/include}}\n    </select>\n    <input name=\"title\" value=\"\" autocomplete=\"off\" placeholder=\"title\">\n    <input type=\"hidden\" name=\":name|newUUID\" value=\"\">\n    <input type=\"hidden\" name=\":forward\" value=\"{{req_path R.PATH}}\">\n    <input type=\"hidden\" name=\"_rt\" value=\"db/group/config/field\">\n    <button type=\"submit\">add</button>\n  </form>\n\n  <h3>value field</h3>\n  <form method=\"post\" action=\"{{res_path \".\" \"{:name}\"}}\">\n    <select name=\"field_type\">\n      <option value=\"db/item/field/date\">date</option>\n      <option value=\"db/item/field/bool\">boolean</option>\n    </select>\n    <input name=\"title\" value=\"\" autocomplete=\"off\" placeholder=\"title\">\n    <input type=\"hidden\" name=\":name|newUUID\" value=\"\">\n    <input type=\"hidden\" name=\":forward\" value=\"{{req_path R.PATH}}\">\n    <input type=\"hidden\" name=\"_rt\" value=\"db/group/config/field\">\n    <button type=\"submit\">add</button>\n  </form>\n\n<h3>group by</h3>\n  <form method=\"post\" action=\"{{res_path \".\"}}\">\n    <select name=\"group_by\">\n{{#include \".\" \"children\"}}\n      <option value=\"{{_.group_ref}}\">{{_.title}}</option>\n{{/include}}\n    </select>\n    <input type=\"hidden\" name=\":forward\" value=\"{{req_path R.PATH}}\">\n    <button type=\"submit\">save</button>\n  </form>\n\n<h3>refrences</h3>\n\n{{#include \"..\" \"find-ref-groups\"}}\n      {{name}}--{{_.title}} {{dump this}}<br>\n{{/include}}\n\n</body>\n</html>\n"
        }
      },
      "find-ref-groups.js": {
        "_ct": "text/javascript",
        "_pt": "resource/content",
        "_content": "(async function (res, writer, ctx) {\n  writer.start('object/javascript');\n\n  let path = res['path'];\n  let name = res['name'];\n  let base = '/content/db';\n  let paths = [];\n  let rv = [];\n\n  await ctx.listAllResourceNames(base, function(it) {\n    let f = Utils.filename(it);\n    if (f.indexOf('db_group_config_field') == 0) {\n      let p = base+it;\n      paths.push(p);\n    }\n  });\n\n  for (let i = 0; i < paths.length; i++) {\n    let r = await ctx.resolveResource(paths[i]);\n    if (r && r._['group_ref'] == name) {\n      let gp = Utils.absolute_path(paths[i]+'/../..');\n      let gc = base+paths[i];\n\n      r = await ctx.resolveResource(gp);\n      r['path'] = gp;\n      r['config_path'] = gc;\n      r['group'] = r['name']; \n      rv.push(r);\n    }\n  }\n\n  writer.write(rv);\n  writer.end();\n})\n"
      },
      "items-table.js": {
        "_ct": "text/javascript",
        "_pt": "resource/content",
        "_content": "async function fields_for_columns(ctx, fields, cols) {\n  let rv = [];\n\n  for (let i = 0; i < cols.length; i++) {\n    let col = cols[i];\n    let values = [];\n\n    for (let x = 0; x < fields.length; x++) {\n      let field = fields[x];\n\n      if (col.name == field.name) {\n        for (let z = 0; z < field.values.length; z++) {\n          let value = field.values[z];\n\n          if (value._ && value._.group_ref && value._.group_ref == col._.group_ref) {\n            let item_ref = value._.item_ref;\n            let group_ref = value._.group_ref;\n            let vres = await ctx.resolveResource(`/content/db/${group_ref}/${item_ref}`);\n\n            values.push({\n              item_ref:item_ref,\n              group_ref:group_ref,\n              title:vres._.title\n            });\n          }\n          else {\n            values.push(value);\n          }\n        }\n      }\n    }\n\n    rv.push({\n      name:col.name,\n      title:col._.title,\n      group_ref:col._.group_ref,\n      values:values\n    });\n  }\n  return rv;\n}\n\nfunction values_contain_field(fields, val) {\n  if (!val) return true;\n\n  for (let i = 0; i < fields.length; i++) {\n    let values = fields[i].values;\n    for (let x = 0; x < values.length; x++) {\n      let value = values[x];\n      if (value._ && value._.item_ref == val) return true;\n    }\n  }\n  return false;\n}\n\n(async function (res, writer, ctx) {\n  writer.start('object/javascript');\n\n  let filter_item_ref = ctx.getQueryProperty('filter_item');\n  let path = res['path'];\n  let cols = await ctx.listResources(`${path}/config`);\n  let config = await ctx.resolveResource(`${path}/config`) || {};\n  let items = await ctx.listResources(path);\n  let rows = [];\n\n  for (let i = 0; i < items.length; i++) {\n    let item = items[i];\n    if ('db/item' != item.renderType) continue;\n\n    let fields = await ctx.listResources(item.path);\n    \n    for (let x = 0; x < fields.length; x++) {\n      let field = fields[x];\n      if (field._['bool_value']) {\n        field.values = [{\n          title:field._['bool_value'],\n          item_ref:'item_ref',\n          group_ref:field._['bool_value']\n        }];\n      }\n      else if (field._['date_value']) {\n        field.values = [{\n          title:field._['date_value']\n        }];\n      }\n      else {\n        let values = await ctx.listResources(field.path) || [];\n        field.values = values;\n      }\n    }\n\n    if (!values_contain_field(fields, filter_item_ref)) continue;\n    rows.push({\n      name:item.name,\n      path:item.path,\n      group_ref:res.name,\n      item_ref:item.name,\n      title:item._.title,\n      note:item._.note,\n      fields:await fields_for_columns(ctx, fields, cols)\n    });\n  }\n\n  let rv = {\n    config:config['_'],\n    columns:cols,\n    rows:rows\n  };\n\n  writer.write(rv);\n  writer.end();\n});"
      },
      "items.js": {
        "_ct": "text/javascript",
        "_pt": "resource/content",
        "_content": "(async function (res, writer, ctx) {\n  writer.start('object/javascript');\n\n  let path = res['path'];\n  let items = await ctx.listResources(path, (it) => { return (it.renderType == 'db/item') });\n\n  writer.write(items);\n  writer.end();\n});"
      },
      "default.hbs": {
        "_ct": "text/plain",
        "_pt": "resource/content",
        "_content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n  <meta charset=\"utf-8\">\n  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n  <link rel=\"icon\" href=\"data:;base64,iVBORw0KGgo=\">\n\n  {{include_js \"resource/node/dev-tools.js\" \"db/cash.min.js\" \"db/ui.js\" \"db/components.js\"}}\n  {{include_css \"db/ui.css\"}}\n\n  <title>groups</title>\n</head>\n\n<body>\n  <a href=\"{{req_path \"/content/db\"}}\">db</a>\n\n  <h1>Group {{_.title}}</h1>\n  <a href=\"{{req_path \"./config\"}}\">c </a>\n  <a href=\"{{req_path \".\"}}\">(all)</a>\n\n  items:\n  {{include \".\" \"t-items-table\"}}\n\n  <form method=\"post\" action=\"{{res_path \".\" \"{:name}\"}}\">\n    <input name=\"title\" value=\"\" autocomplete=\"off\" placeholder=\"title\">\n    <input type=\"hidden\" name=\":name|newUUID\" value=\"\">\n    <input type=\"hidden\" name=\":forward\" value=\"{{req_path \".\"}}\">\n    <input type=\"hidden\" name=\"_rt\" value=\"db/item\">\n    <button type=\"submit\">add</button>\n  </form>\n\n</body>\n</html>\n"
      },
      "t-items-list.hbs": {
        "_ct": "text/plain",
        "_pt": "resource/content",
        "_content": "{{#include \".\" \"items\"}}\n  <div>\n    item:<a href=\"{{req_path path}}\"> {{_.title}}</a> <a href=\"{{req_path path \"res-delete\"}}\">d</a>\n  </div>\n{{/include}}"
      },
      "t-items-table.hbs": {
        "_ct": "text/plain",
        "_pt": "resource/content",
        "_content": "<input type=\"text\" class=\"act-search\" data-table=\"#st{{S.RENDER_COUNT}}\">\n\n{{#include \".\" \"items-table\"}}\n  <table is=\"sorted-table\" data-group_by=\"{{config.group_by}}\" data-sort_by=\"{{config.sort_by}}\" id=\"st{{../S.RENDER_COUNT}}\">\n    <thead>\n      <tr>\n        <th>name</th>\n        <th>note</th>\n  {{#each columns}}\n        <th data-group_ref=\"{{_.group_ref}}\">\n          {{_.title}} [<a href=\"#\" class=\"act-sort\">s</a><a href=\"#\" class=\"act-group\">g</a>]\n        </th>\n  {{/each}}\n      </tr>\n    </thead>\n    <tbody>\n  {{#each rows}}\n    <tr>\n      <td data-group_ref=\"{{group_ref}}\" data-item_ref=\"{{item_ref}}\">\n        <a href=\"{{req_path path}}\">{{title}}</a>\n        <a href=\"{{req_path path \"res-delete\"}}\">d</a>\n      </td>\n      <td>\n        {{note}}\n      </td>\n    {{#each fields}}\n      <td data-group_ref=\"{{group_ref}}\">\n      {{#each values}}\n        <span data-item_ref=\"{{item_ref}}\">{{title}}</span>\n      {{/each}}\n      </td>\n    {{/each}}\n    </tr>\n  {{/each}}\n    </tbody>\n  </table>\n{{/include}}"
      },
      "find-ref-config.js": {
        "_ct": "text/javascript",
        "_pt": "resource/content",
        "_content": "(async function (res, writer, ctx) {\n  writer.start('object/javascript');\n\n  let group_ref = ctx.getQueryProperty('group_ref');\n  let item_ref = ctx.getQueryProperty('item_ref');\n  let path = res['path'];\n  let rv = {};\n\n  await ctx.listResources(\"./config\", function(it) {\n    if (it._['group_ref'] === group_ref) {\n      rv = it;\n      rv['group_ref'] = group_ref;\n      rv['item_ref'] = item_ref;\n      rv['config_name'] = rv['name'];\n    }\n  });\n\n  writer.write(rv);\n  writer.end();\n})\n"
      },
      "choose-path.hbs": {
        "_ct": "text/plain",
        "_pt": "resource/content",
        "_content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n  <meta charset=\"utf-8\">\n  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n  <link rel=\"icon\" href=\"data:;base64,iVBORw0KGgo=\">\n\n  {{include_js \"db/cash.min.js\" \"db/ui.js\" \"db/components.js\"}}\n  {{include_css \"db/ui.css\"}}\n\n  <title>choose groups</title>\n</head>\n\n<body class=\"ui-popup-content\">\n  <h1>{{_.title}}</h1>\n\n  {{include \".\" \"t-items-table\"}}\n\n  <form method=\"post\" action=\"{{res_path \".\" \"{:name}\"}}\">\n    <input name=\"title\" value=\"\" autocomplete=\"off\" placeholder=\"title\">\n    <input type=\"hidden\" name=\":name|newUUID\" value=\"\">\n    <input type=\"hidden\" name=\":forward\" value=\"{{req_path \".\"}}\">\n    <input type=\"hidden\" name=\"_rt\" value=\"db/item\">\n    <button type=\"submit\">add</button>\n  </form>\n\n</body>\n</html>\n"
      }
    },
    "ui.js": {
      "_ct": "text/javascript",
      "_pt": "resource/content",
      "_content": "function popupPath(path_ref, cb) {\n  let el = document.querySelector('#popup');\n  if (!el) {\n    el = document.createElement('iframe');\n    el.id = 'popup';\n    document.body.append(el);\n  }\n  el.src = path_ref;\n  el.callback = cb;\n  $(document.body).addClass('ui-popup-background');\n  $(el).show();\n}\n\n$(function () {\n  window.addEventListener('message', function(evt) {\n    let el = $('[src=\"'+evt.source.location.toString()+'\"]').get(0);\n    if (el && el['callback']) {\n      setTimeout(function() {\n        el.callback(evt.data);\n      },0);\n    }\n  });\n\n  $(document).on('click', '.ui-popup-content', function(evt) {\n    let item_ref = $(evt.target).parents('[data-item_ref]').data('item_ref');\n    if (item_ref) {\n      window.top.postMessage(item_ref, window.location);\n      evt.preventDefault();\n    }\n  });\n\n  $(document).on('click', '.ui-popup-background', function(evt) {\n    $('#popup').hide();\n    $(document.body).removeClass('ui-popup-background');\n    evt.preventDefault();\n  });\n\n  $(document).on('keypress', '.act-search', function(evt) {\n    if (evt.key === 'Enter' || evt.keyCode === 13) {\n      let $el = $(evt.target);\n      let table = document.querySelector($el.data('table'));\n      if (table) {\n        let text = $el.val(); \n        table.searchTable(text);\n      }\n      evt.preventDefault();\n    }\n  });\n\n  $(document).on('click', '.act-popup', function(evt) {\n    let $el = $(evt.target);\n    let path = $(evt.target).data('path');\n    let name = $(evt.target).attr('name');\n    let $form = $(evt.target).parents('form');\n\n    popupPath(path, function(item) {\n      Utils.flushResourceCache();\n\n      $el.val(item);\n      $form.trigger('submit');\n    });\n    evt.preventDefault();\n  });\n\n  $(document).on('click', '.act-sort', function(evt) {\n    let group_ref = $(evt.target).parent().data('group_ref');\n    let table = $(evt.target).parents('table').get(0);\n    if (table && group_ref) {\n      table.sortTable(group_ref);\n    }\n    evt.preventDefault();\n  });\n\n  $(document).on('click', '.act-group', function(evt) {\n    let group_ref = $(evt.target).parent().data('group_ref');\n    let table = $(evt.target).parents('table').get(0);\n    if (table && group_ref) {\n      table.groupTable(group_ref);\n    }\n    evt.preventDefault();\n  });\n});"
    },
    "cash.min.js": {
      "_ct": "text/javascript",
      "_pt": "resource/content",
      "_content": "(function(){\"use strict\";var C=document,M=window,st=C.documentElement,L=C.createElement.bind(C),ft=L(\"div\"),q=L(\"table\"),Mt=L(\"tbody\"),ot=L(\"tr\"),H=Array.isArray,S=Array.prototype,Bt=S.concat,U=S.filter,at=S.indexOf,ct=S.map,Dt=S.push,ht=S.slice,z=S.some,_t=S.splice,Pt=/^#(?:[\\w-]|\\\\.|[^\\x00-\\xa0])*$/,Ht=/^\\.(?:[\\w-]|\\\\.|[^\\x00-\\xa0])*$/,It=/<.+>/,$t=/^\\w+$/;function J(t,n){var r=jt(n);return!t||!r&&!D(n)&&!c(n)?[]:!r&&Ht.test(t)?n.getElementsByClassName(t.slice(1).replace(/\\\\/g,\"\")):!r&&$t.test(t)?n.getElementsByTagName(t):n.querySelectorAll(t)}var dt=function(){function t(n,r){if(!!n){if(Y(n))return n;var i=n;if(g(n)){var u=(Y(r)?r[0]:r)||C;if(i=Pt.test(n)&&\"getElementById\"in u?u.getElementById(n.slice(1).replace(/\\\\/g,\"\")):It.test(n)?yt(n):J(n,u),!i)return}else if(A(n))return this.ready(n);(i.nodeType||i===M)&&(i=[i]),this.length=i.length;for(var s=0,f=this.length;s<f;s++)this[s]=i[s]}}return t.prototype.init=function(n,r){return new t(n,r)},t}(),e=dt.prototype,o=e.init;o.fn=o.prototype=e,e.length=0,e.splice=_t,typeof Symbol==\"function\"&&(e[Symbol.iterator]=S[Symbol.iterator]);function Y(t){return t instanceof dt}function B(t){return!!t&&t===t.window}function D(t){return!!t&&t.nodeType===9}function jt(t){return!!t&&t.nodeType===11}function c(t){return!!t&&t.nodeType===1}function Ft(t){return!!t&&t.nodeType===3}function Wt(t){return typeof t==\"boolean\"}function A(t){return typeof t==\"function\"}function g(t){return typeof t==\"string\"}function v(t){return t===void 0}function P(t){return t===null}function lt(t){return!isNaN(parseFloat(t))&&isFinite(t)}function G(t){if(typeof t!=\"object\"||t===null)return!1;var n=Object.getPrototypeOf(t);return n===null||n===Object.prototype}o.isWindow=B,o.isFunction=A,o.isArray=H,o.isNumeric=lt,o.isPlainObject=G;function d(t,n,r){if(r){for(var i=t.length;i--;)if(n.call(t[i],i,t[i])===!1)return t}else if(G(t))for(var u=Object.keys(t),i=0,s=u.length;i<s;i++){var f=u[i];if(n.call(t[f],f,t[f])===!1)return t}else for(var i=0,s=t.length;i<s;i++)if(n.call(t[i],i,t[i])===!1)return t;return t}o.each=d,e.each=function(t){return d(this,t)},e.empty=function(){return this.each(function(t,n){for(;n.firstChild;)n.removeChild(n.firstChild)})};function I(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=Wt(t[0])?t.shift():!1,i=t.shift(),u=t.length;if(!i)return{};if(!u)return I(r,o,i);for(var s=0;s<u;s++){var f=t[s];for(var a in f)r&&(H(f[a])||G(f[a]))?((!i[a]||i[a].constructor!==f[a].constructor)&&(i[a]=new f[a].constructor),I(r,i[a],f[a])):i[a]=f[a]}return i}o.extend=I,e.extend=function(t){return I(e,t)};var qt=/\\S+/g;function $(t){return g(t)?t.match(qt)||[]:[]}e.toggleClass=function(t,n){var r=$(t),i=!v(n);return this.each(function(u,s){!c(s)||d(r,function(f,a){i?n?s.classList.add(a):s.classList.remove(a):s.classList.toggle(a)})})},e.addClass=function(t){return this.toggleClass(t,!0)},e.removeAttr=function(t){var n=$(t);return this.each(function(r,i){!c(i)||d(n,function(u,s){i.removeAttribute(s)})})};function Ut(t,n){if(!!t){if(g(t)){if(arguments.length<2){if(!this[0]||!c(this[0]))return;var r=this[0].getAttribute(t);return P(r)?void 0:r}return v(n)?this:P(n)?this.removeAttr(t):this.each(function(u,s){!c(s)||s.setAttribute(t,n)})}for(var i in t)this.attr(i,t[i]);return this}}e.attr=Ut,e.removeClass=function(t){return arguments.length?this.toggleClass(t,!1):this.attr(\"class\",\"\")},e.hasClass=function(t){return!!t&&z.call(this,function(n){return c(n)&&n.classList.contains(t)})},e.get=function(t){return v(t)?ht.call(this):(t=Number(t),this[t<0?t+this.length:t])},e.eq=function(t){return o(this.get(t))},e.first=function(){return this.eq(0)},e.last=function(){return this.eq(-1)};function zt(t){return v(t)?this.get().map(function(n){return c(n)||Ft(n)?n.textContent:\"\"}).join(\"\"):this.each(function(n,r){!c(r)||(r.textContent=t)})}e.text=zt;function T(t,n,r){if(!!c(t)){var i=M.getComputedStyle(t,null);return r?i.getPropertyValue(n)||void 0:i[n]||t.style[n]}}function E(t,n){return parseInt(T(t,n),10)||0}function gt(t,n){return E(t,\"border\".concat(n?\"Left\":\"Top\",\"Width\"))+E(t,\"padding\".concat(n?\"Left\":\"Top\"))+E(t,\"padding\".concat(n?\"Right\":\"Bottom\"))+E(t,\"border\".concat(n?\"Right\":\"Bottom\",\"Width\"))}var X={};function Jt(t){if(X[t])return X[t];var n=L(t);C.body.insertBefore(n,null);var r=T(n,\"display\");return C.body.removeChild(n),X[t]=r!==\"none\"?r:\"block\"}function vt(t){return T(t,\"display\")===\"none\"}function pt(t,n){var r=t&&(t.matches||t.webkitMatchesSelector||t.msMatchesSelector);return!!r&&!!n&&r.call(t,n)}function j(t){return g(t)?function(n,r){return pt(r,t)}:A(t)?t:Y(t)?function(n,r){return t.is(r)}:t?function(n,r){return r===t}:function(){return!1}}e.filter=function(t){var n=j(t);return o(U.call(this,function(r,i){return n.call(r,i,r)}))};function x(t,n){return n?t.filter(n):t}e.detach=function(t){return x(this,t).each(function(n,r){r.parentNode&&r.parentNode.removeChild(r)}),this};var Yt=/^\\s*<(\\w+)[^>]*>/,Gt=/^<(\\w+)\\s*\\/?>(?:<\\/\\1>)?$/,mt={\"*\":ft,tr:Mt,td:ot,th:ot,thead:q,tbody:q,tfoot:q};function yt(t){if(!g(t))return[];if(Gt.test(t))return[L(RegExp.$1)];var n=Yt.test(t)&&RegExp.$1,r=mt[n]||mt[\"*\"];return r.innerHTML=t,o(r.childNodes).detach().get()}o.parseHTML=yt,e.has=function(t){var n=g(t)?function(r,i){return J(t,i).length}:function(r,i){return i.contains(t)};return this.filter(n)},e.not=function(t){var n=j(t);return this.filter(function(r,i){return(!g(t)||c(i))&&!n.call(i,r,i)})};function R(t,n,r,i){for(var u=[],s=A(n),f=i&&j(i),a=0,y=t.length;a<y;a++)if(s){var h=n(t[a]);h.length&&Dt.apply(u,h)}else for(var p=t[a][n];p!=null&&!(i&&f(-1,p));)u.push(p),p=r?p[n]:null;return u}function bt(t){return t.multiple&&t.options?R(U.call(t.options,function(n){return n.selected&&!n.disabled&&!n.parentNode.disabled}),\"value\"):t.value||\"\"}function Xt(t){return arguments.length?this.each(function(n,r){var i=r.multiple&&r.options;if(i||Ot.test(r.type)){var u=H(t)?ct.call(t,String):P(t)?[]:[String(t)];i?d(r.options,function(s,f){f.selected=u.indexOf(f.value)>=0},!0):r.checked=u.indexOf(r.value)>=0}else r.value=v(t)||P(t)?\"\":t}):this[0]&&bt(this[0])}e.val=Xt,e.is=function(t){var n=j(t);return z.call(this,function(r,i){return n.call(r,i,r)})},o.guid=1;function w(t){return t.length>1?U.call(t,function(n,r,i){return at.call(i,n)===r}):t}o.unique=w,e.add=function(t,n){return o(w(this.get().concat(o(t,n).get())))},e.children=function(t){return x(o(w(R(this,function(n){return n.children}))),t)},e.parent=function(t){return x(o(w(R(this,\"parentNode\"))),t)},e.index=function(t){var n=t?o(t)[0]:this[0],r=t?this:o(n).parent().children();return at.call(r,n)},e.closest=function(t){var n=this.filter(t);if(n.length)return n;var r=this.parent();return r.length?r.closest(t):n},e.siblings=function(t){return x(o(w(R(this,function(n){return o(n).parent().children().not(n)}))),t)},e.find=function(t){return o(w(R(this,function(n){return J(t,n)})))};var Kt=/^\\s*<!(?:\\[CDATA\\[|--)|(?:\\]\\]|--)>\\s*$/g,Qt=/^$|^module$|\\/(java|ecma)script/i,Vt=[\"type\",\"src\",\"nonce\",\"noModule\"];function Zt(t,n){var r=o(t);r.filter(\"script\").add(r.find(\"script\")).each(function(i,u){if(Qt.test(u.type)&&st.contains(u)){var s=L(\"script\");s.text=u.textContent.replace(Kt,\"\"),d(Vt,function(f,a){u[a]&&(s[a]=u[a])}),n.head.insertBefore(s,null),n.head.removeChild(s)}})}function kt(t,n,r,i,u){i?t.insertBefore(n,r?t.firstChild:null):t.nodeName===\"HTML\"?t.parentNode.replaceChild(n,t):t.parentNode.insertBefore(n,r?t:t.nextSibling),u&&Zt(n,t.ownerDocument)}function N(t,n,r,i,u,s,f,a){return d(t,function(y,h){d(o(h),function(p,O){d(o(n),function(b,W){var rt=r?O:W,it=r?W:O,m=r?p:b;kt(rt,m?it.cloneNode(!0):it,i,u,!m)},a)},f)},s),n}e.after=function(){return N(arguments,this,!1,!1,!1,!0,!0)},e.append=function(){return N(arguments,this,!1,!1,!0)};function tn(t){if(!arguments.length)return this[0]&&this[0].innerHTML;if(v(t))return this;var n=/<script[\\s>]/.test(t);return this.each(function(r,i){!c(i)||(n?o(i).empty().append(t):i.innerHTML=t)})}e.html=tn,e.appendTo=function(t){return N(arguments,this,!0,!1,!0)},e.wrapInner=function(t){return this.each(function(n,r){var i=o(r),u=i.contents();u.length?u.wrapAll(t):i.append(t)})},e.before=function(){return N(arguments,this,!1,!0)},e.wrapAll=function(t){for(var n=o(t),r=n[0];r.children.length;)r=r.firstElementChild;return this.first().before(n),this.appendTo(r)},e.wrap=function(t){return this.each(function(n,r){var i=o(t)[0];o(r).wrapAll(n?i.cloneNode(!0):i)})},e.insertAfter=function(t){return N(arguments,this,!0,!1,!1,!1,!1,!0)},e.insertBefore=function(t){return N(arguments,this,!0,!0)},e.prepend=function(){return N(arguments,this,!1,!0,!0,!0,!0)},e.prependTo=function(t){return N(arguments,this,!0,!0,!0,!1,!1,!0)},e.contents=function(){return o(w(R(this,function(t){return t.tagName===\"IFRAME\"?[t.contentDocument]:t.tagName===\"TEMPLATE\"?t.content.childNodes:t.childNodes})))},e.next=function(t,n,r){return x(o(w(R(this,\"nextElementSibling\",n,r))),t)},e.nextAll=function(t){return this.next(t,!0)},e.nextUntil=function(t,n){return this.next(n,!0,t)},e.parents=function(t,n){return x(o(w(R(this,\"parentElement\",!0,n))),t)},e.parentsUntil=function(t,n){return this.parents(n,t)},e.prev=function(t,n,r){return x(o(w(R(this,\"previousElementSibling\",n,r))),t)},e.prevAll=function(t){return this.prev(t,!0)},e.prevUntil=function(t,n){return this.prev(n,!0,t)},e.map=function(t){return o(Bt.apply([],ct.call(this,function(n,r){return t.call(n,r,n)})))},e.clone=function(){return this.map(function(t,n){return n.cloneNode(!0)})},e.offsetParent=function(){return this.map(function(t,n){for(var r=n.offsetParent;r&&T(r,\"position\")===\"static\";)r=r.offsetParent;return r||st})},e.slice=function(t,n){return o(ht.call(this,t,n))};var nn=/-([a-z])/g;function K(t){return t.replace(nn,function(n,r){return r.toUpperCase()})}e.ready=function(t){var n=function(){return setTimeout(t,0,o)};return C.readyState!==\"loading\"?n():C.addEventListener(\"DOMContentLoaded\",n),this},e.unwrap=function(){return this.parent().each(function(t,n){if(n.tagName!==\"BODY\"){var r=o(n);r.replaceWith(r.children())}}),this},e.offset=function(){var t=this[0];if(!!t){var n=t.getBoundingClientRect();return{top:n.top+M.pageYOffset,left:n.left+M.pageXOffset}}},e.position=function(){var t=this[0];if(!!t){var n=T(t,\"position\")===\"fixed\",r=n?t.getBoundingClientRect():this.offset();if(!n){for(var i=t.ownerDocument,u=t.offsetParent||i.documentElement;(u===i.body||u===i.documentElement)&&T(u,\"position\")===\"static\";)u=u.parentNode;if(u!==t&&c(u)){var s=o(u).offset();r.top-=s.top+E(u,\"borderTopWidth\"),r.left-=s.left+E(u,\"borderLeftWidth\")}}return{top:r.top-E(t,\"marginTop\"),left:r.left-E(t,\"marginLeft\")}}};var Et={class:\"className\",contenteditable:\"contentEditable\",for:\"htmlFor\",readonly:\"readOnly\",maxlength:\"maxLength\",tabindex:\"tabIndex\",colspan:\"colSpan\",rowspan:\"rowSpan\",usemap:\"useMap\"};e.prop=function(t,n){if(!!t){if(g(t))return t=Et[t]||t,arguments.length<2?this[0]&&this[0][t]:this.each(function(i,u){u[t]=n});for(var r in t)this.prop(r,t[r]);return this}},e.removeProp=function(t){return this.each(function(n,r){delete r[Et[t]||t]})};var rn=/^--/;function Q(t){return rn.test(t)}var V={},en=ft.style,un=[\"webkit\",\"moz\",\"ms\"];function sn(t,n){if(n===void 0&&(n=Q(t)),n)return t;if(!V[t]){var r=K(t),i=\"\".concat(r[0].toUpperCase()).concat(r.slice(1)),u=\"\".concat(r,\" \").concat(un.join(\"\".concat(i,\" \"))).concat(i).split(\" \");d(u,function(s,f){if(f in en)return V[t]=f,!1})}return V[t]}var fn={animationIterationCount:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0};function wt(t,n,r){return r===void 0&&(r=Q(t)),!r&&!fn[t]&&lt(n)?\"\".concat(n,\"px\"):n}function on(t,n){if(g(t)){var r=Q(t);return t=sn(t,r),arguments.length<2?this[0]&&T(this[0],t,r):t?(n=wt(t,n,r),this.each(function(u,s){!c(s)||(r?s.style.setProperty(t,n):s.style[t]=n)})):this}for(var i in t)this.css(i,t[i]);return this}e.css=on;function Ct(t,n){try{return t(n)}catch{return n}}var an=/^\\s+|\\s+$/;function St(t,n){var r=t.dataset[n]||t.dataset[K(n)];return an.test(r)?r:Ct(JSON.parse,r)}function cn(t,n,r){r=Ct(JSON.stringify,r),t.dataset[K(n)]=r}function hn(t,n){if(!t){if(!this[0])return;var r={};for(var i in this[0].dataset)r[i]=St(this[0],i);return r}if(g(t))return arguments.length<2?this[0]&&St(this[0],t):v(n)?this:this.each(function(u,s){cn(s,t,n)});for(var i in t)this.data(i,t[i]);return this}e.data=hn;function Tt(t,n){var r=t.documentElement;return Math.max(t.body[\"scroll\".concat(n)],r[\"scroll\".concat(n)],t.body[\"offset\".concat(n)],r[\"offset\".concat(n)],r[\"client\".concat(n)])}d([!0,!1],function(t,n){d([\"Width\",\"Height\"],function(r,i){var u=\"\".concat(n?\"outer\":\"inner\").concat(i);e[u]=function(s){if(!!this[0])return B(this[0])?n?this[0][\"inner\".concat(i)]:this[0].document.documentElement[\"client\".concat(i)]:D(this[0])?Tt(this[0],i):this[0][\"\".concat(n?\"offset\":\"client\").concat(i)]+(s&&n?E(this[0],\"margin\".concat(r?\"Top\":\"Left\"))+E(this[0],\"margin\".concat(r?\"Bottom\":\"Right\")):0)}})}),d([\"Width\",\"Height\"],function(t,n){var r=n.toLowerCase();e[r]=function(i){if(!this[0])return v(i)?void 0:this;if(!arguments.length)return B(this[0])?this[0].document.documentElement[\"client\".concat(n)]:D(this[0])?Tt(this[0],n):this[0].getBoundingClientRect()[r]-gt(this[0],!t);var u=parseInt(i,10);return this.each(function(s,f){if(!!c(f)){var a=T(f,\"boxSizing\");f.style[r]=wt(r,u+(a===\"border-box\"?gt(f,!t):0))}})}});var Rt=\"___cd\";e.toggle=function(t){return this.each(function(n,r){if(!!c(r)){var i=v(t)?vt(r):t;i?(r.style.display=r[Rt]||\"\",vt(r)&&(r.style.display=Jt(r.tagName))):(r[Rt]=T(r,\"display\"),r.style.display=\"none\")}})},e.hide=function(){return this.toggle(!1)},e.show=function(){return this.toggle(!0)};var xt=\"___ce\",Z=\".\",k={focus:\"focusin\",blur:\"focusout\"},Nt={mouseenter:\"mouseover\",mouseleave:\"mouseout\"},dn=/^(mouse|pointer|contextmenu|drag|drop|click|dblclick)/i;function tt(t){return Nt[t]||k[t]||t}function nt(t){var n=t.split(Z);return[n[0],n.slice(1).sort()]}e.trigger=function(t,n){if(g(t)){var r=nt(t),i=r[0],u=r[1],s=tt(i);if(!s)return this;var f=dn.test(s)?\"MouseEvents\":\"HTMLEvents\";t=C.createEvent(f),t.initEvent(s,!0,!0),t.namespace=u.join(Z),t.___ot=i}t.___td=n;var a=t.___ot in k;return this.each(function(y,h){a&&A(h[t.___ot])&&(h[\"___i\".concat(t.type)]=!0,h[t.___ot](),h[\"___i\".concat(t.type)]=!1),h.dispatchEvent(t)})};function Lt(t){return t[xt]=t[xt]||{}}function ln(t,n,r,i,u){var s=Lt(t);s[n]=s[n]||[],s[n].push([r,i,u]),t.addEventListener(n,u)}function At(t,n){return!n||!z.call(n,function(r){return t.indexOf(r)<0})}function F(t,n,r,i,u){var s=Lt(t);if(n)s[n]&&(s[n]=s[n].filter(function(f){var a=f[0],y=f[1],h=f[2];if(u&&h.guid!==u.guid||!At(a,r)||i&&i!==y)return!0;t.removeEventListener(n,h)}));else for(n in s)F(t,n,r,i,u)}e.off=function(t,n,r){var i=this;if(v(t))this.each(function(s,f){!c(f)&&!D(f)&&!B(f)||F(f)});else if(g(t))A(n)&&(r=n,n=\"\"),d($(t),function(s,f){var a=nt(f),y=a[0],h=a[1],p=tt(y);i.each(function(O,b){!c(b)&&!D(b)&&!B(b)||F(b,p,h,n,r)})});else for(var u in t)this.off(u,t[u]);return this},e.remove=function(t){return x(this,t).detach().off(),this},e.replaceWith=function(t){return this.before(t).remove()},e.replaceAll=function(t){return o(t).replaceWith(this),this};function gn(t,n,r,i,u){var s=this;if(!g(t)){for(var f in t)this.on(f,n,r,t[f],u);return this}return g(n)||(v(n)||P(n)?n=\"\":v(r)?(r=n,n=\"\"):(i=r,r=n,n=\"\")),A(i)||(i=r,r=void 0),i?(d($(t),function(a,y){var h=nt(y),p=h[0],O=h[1],b=tt(p),W=p in Nt,rt=p in k;!b||s.each(function(it,m){if(!(!c(m)&&!D(m)&&!B(m))){var et=function(l){if(l.target[\"___i\".concat(l.type)])return l.stopImmediatePropagation();if(!(l.namespace&&!At(O,l.namespace.split(Z)))&&!(!n&&(rt&&(l.target!==m||l.___ot===b)||W&&l.relatedTarget&&m.contains(l.relatedTarget)))){var ut=m;if(n){for(var _=l.target;!pt(_,n);)if(_===m||(_=_.parentNode,!_))return;ut=_}Object.defineProperty(l,\"currentTarget\",{configurable:!0,get:function(){return ut}}),Object.defineProperty(l,\"delegateTarget\",{configurable:!0,get:function(){return m}}),Object.defineProperty(l,\"data\",{configurable:!0,get:function(){return r}});var En=i.call(ut,l,l.___td);u&&F(m,b,O,n,et),En===!1&&(l.preventDefault(),l.stopPropagation())}};et.guid=i.guid=i.guid||o.guid++,ln(m,b,O,n,et)}})}),this):this}e.on=gn;function vn(t,n,r,i){return this.on(t,n,r,i,!0)}e.one=vn;var pn=/%20/g,mn=/\\r?\\n/g;function yn(t,n){return\"&\".concat(encodeURIComponent(t),\"=\").concat(encodeURIComponent(n.replace(mn,`\\r\n`)).replace(pn,\"+\"))}var bn=/file|reset|submit|button|image/i,Ot=/radio|checkbox/i;e.serialize=function(){var t=\"\";return this.each(function(n,r){d(r.elements||[r],function(i,u){if(!(u.disabled||!u.name||u.tagName===\"FIELDSET\"||bn.test(u.type)||Ot.test(u.type)&&!u.checked)){var s=bt(u);if(!v(s)){var f=H(s)?s:[s];d(f,function(a,y){t+=yn(u.name,y)})}}})}),t.slice(1)},typeof exports<\"u\"?module.exports=o:M.cash=M.$=o})();"
    },
    "ui.css": {
      "_ct": "text/css",
      "_pt": "resource/content",
      "_content": "table {\n  border: 1px solid gray;\n  width: 100%;\n}\n\n.group-heading {\n  padding-top: 5px;\n  padding-bottom: 5px;\n  font-size: large;\n}\n\n#popup {\n  background-color: white;\n  position: fixed;\n  top: 0;\n  right: 0;\n  height: 100%;\n  width: 80%;\n  border: 10px solid black;\n  box-sizing: border-box;\n}\n\n.ui-popup-background {\n}\n\nform.ui-inline {\n  display: inline-block;\n}"
    },
    "components.js": {
      "_ct": "text/javascript",
      "_pt": "resource/content",
      "_content": "class SortedTable extends HTMLTableElement {\n  constructor() {\n    super(); \n\n  }\n\n  filterTable(item_ref) {\n    let $table = $(this);\n    if (item_ref) {\n      let $tr = $table.find(`[data-item_ref=${item_ref}]`).parents('tr');\n      $table.find('tr').hide();\n      $tr.show();\n    }\n    else {\n      $table.find('tr').show();\n    }\n  }\n\n  searchTable(text) {\n    let $table = $(this);\n    if (text) {\n      $table.find('tbody tr').each(function(n, tr) {\n        let $tr = $(tr);\n        let line = $tr.text();\n        if (line.indexOf(text) > 0) {\n          $tr.show();\n        }\n        else {\n          $tr.hide();\n        }\n      });\n    }\n    else {\n      $table.find('tr').show();\n    }\n  }\n\n  groupTable(group_ref) {\n    let $table = $(this);\n    $table.find('td,th').show();\n\n    if (group_ref) {\n      let rows = [];\n      let groups = [];\n\n      $table.find(`tbody td[data-group_ref=${group_ref}]`).each(function(n, it) {\n        let tr = it.parentElement;\n        tr.title = it.innerText;\n        if (tr.title == '') tr.title = 'Untitled';\n\n        rows.push(tr);\n      });\n\n      rows.sort(function(a, b) {\n        return a.title.localeCompare(b.title);\n      });\n\n      let last = null;\n      rows.forEach(function(it) {\n        if (it.title != last) {\n          let el = document.createElement('tr');\n          el.innerHTML = '<td class=\"group-heading\">'+it.title+'</td>';\n          groups.push(el);\n        }\n        groups.push(it);\n        last = it.title;\n      });\n\n      $table.find(`td[data-group_ref=${group_ref}]`).hide();\n      $table.find(`th[data-group_ref=${group_ref}]`).hide();\n      $table.find('tbody').empty().append(groups);\n    }\n    else {\n    }\n  }\n\n  sortTable(group_ref) {\n    let $table = $(this);\n    if (group_ref) {\n      let rows = [];\n\n      $table.find(`tbody td[data-group_ref=${group_ref}]`).each(function(n, it) {\n        let tr = it.parentElement;\n        tr.title = it.innerText;\n        rows.push(tr);\n      });\n\n      rows.sort(function(a, b) {\n        return a.title.localeCompare(b.title);\n      });\n\n      $table.find('tbody').empty().append(rows);\n    }\n    else {\n    }\n  }\n\n  connectedCallback() {\n    let group_by = this.dataset['group_by'];\n    if (group_by) {\n      this.groupTable(group_by);\n    }\n  }\n}\n\ncustomElements.define('sorted-table', SortedTable, {extends:'table'});"
    }
  },
  "resource": {
    "config": {
      "_md": "1743287315478",
      "d-filter-class.js": {
        "_ct": "text/javascript",
        "_pt": "resource/content",
        "_content": "(function (res, writer, ctx) {\n  var cl = res._['filter_mode'];\n  writer.start('plain/text');\n  writer.write(cl?cl:'');\n  writer.end();\n});"
      }
    },
    "notfound": {
      "default.js": {
        "_ct": "text/javascript",
        "_pt": "resource/content",
        "_content": "(function (res, writer, context) {\n  //send 404 only if we are requesing this resource directly\n  if (context.getCurrentRequestPath() === context.getCurrentResourcePath()) {\n    context.forwardRequest('/content/notes/main');\n    writer.end();\n  }\n  else {\n    writer.end();\n  }\n});\n"
      }
    },
    "content": {
      "_cd": "1760619401082",
      "_md": "1760619401082",
      "externalize.js": {
        "_ct": "text/javascript",
        "_pt": "resource/content",
        "_content": "(function (res, writer, ctx) {\n  ctx.callTemplateScript('/system-templates/resource/content/externalize.js', res, writer);\n});\n"
      }
    }
  },
  "text": {
    "style": {
      "_md": "1754746772551",
      "default.hbs": {
        "_ct": "text/plain",
        "_pt": "resource/content",
        "_content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n  <meta charset=\"utf-8\">\n  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n  <link rel=\"icon\" href=\"data:;base64,iVBORw0KGgo=\">\n\n  {{include_css \"_libs/ui.css\"}}\n  {{include_css \"text/_libs/ui.css\"}}\n\n  {{#partial \"field_name\"}}\n    name:<select name=\"\\{{name}}\">\n      <option \\{{eq value \"Arial\" \"selected\"}}           value=\"Arial\">Arial</option>\n      <option \\{{eq value \"Verdana\" \"selected\"}}         value=\"Verdana\">Verdana</option>\n      <option \\{{eq value \"Tahoma\" \"selected\"}}          value=\"Tahoma\">Tahoma</option>\n      <option \\{{eq value \"Trebuchet MS\" \"selected\"}}    value=\"Trebuchet MS\">Trebuchet MS</option>\n      <option \\{{eq value \"Times New Roman\" \"selected\"}} value=\"Times New Roman\">Times New Roman</option>\n      <option \\{{eq value \"Georgia\" \"selected\"}}         value=\"Georgia\">Georgia</option>\n      <option \\{{eq value \"Garamond\" \"selected\"}}        value=\"Garamond\">Garamond</option>\n      <option \\{{eq value \"Courier New\" \"selected\"}}     value=\"Courier New\">Courier New</option>\n      <option \\{{eq value \"Brush Script MT\" \"selected\"}} value=\"Brush Script MT\">Brush Script MT</option>\n    </select>\n  {{/partial}}\n\n  {{#partial \"field_size\"}}\n    size: <input type=\"number\" min=\"8\" name=\"\\{{name}}\" value=\"\\{{value}}\">\n  {{/partial}}\n\n  {{#partial \"field_color\"}}\n    size: <input type=\"color\" name=\"\\{{name}}\" value=\"\\{{value}}\">\n  {{/partial}}\n\n  {{#partial \"field_bold\"}}\n    bold: <input type=\"checkbox\" name=\"\\{{name}}\" value=\"bold\" \\{{eq value \"bold\" \"checked\"}}>\n  {{/partial}}\n\n  <title>Edit Style</title>\n</head>\n\n<body class=\"ui_dialog ui_group\">\n  <h3>style</h3>\n\n  <form method=\"post\" action=\"{{res_path \".\"}}\">\n    <h4>body:</h4>\n\n    {{>field_name  name=\"body_name\" value=_.body_name}}\n    {{>field_size  name=\"body_size\" value=_.body_size}}\n    {{>field_color name=\"body_color\" value=_.body_color}}\n\n    <h4>h1 size:</h4>\n\n    {{>field_name  name=\"h1_name\" value=_.h1_name}}\n    {{>field_size  name=\"h1_size\" value=_.h1_size}}\n    {{>field_color name=\"h1_color\" value=_.h1_color}}\n    {{>field_bold name=\"h1_bold\" value=_.h1_bold}}\n\n    <h4>h2 size:</h4>\n\n    {{>field_name  name=\"h2_name\" value=_.h2_name}}\n    {{>field_size  name=\"h2_size\" value=_.h2_size}}\n    {{>field_color name=\"h2_color\" value=_.h2_color}}\n    {{>field_bold name=\"h2_bold\" value=_.h2_bold}}\n\n    <h4>h3 size:</h4>\n\n    {{>field_name  name=\"h3_name\" value=_.h3_name}}\n    {{>field_size  name=\"h3_size\" value=_.h3_size}}\n    {{>field_color name=\"h3_color\" value=_.h3_color}}\n    {{>field_bold name=\"h3_bold\" value=_.h3_bold}}\n\n    <h4>em:</h4>\n\n    {{>field_color name=\"em_color\" value=_.em_color}}\n    {{>field_bold name=\"em_bold\" value=_.em_bold}}\n\n    <h4>strong:</h4>\n\n    {{>field_color name=\"strong_color\" value=_.strong_color}}\n    {{>field_bold name=\"strong_bold\" value=_.strong_bold}}\n\n    <h4>code block</h4>\n\n    {{>field_color name=\"code_color\" value=_.code_color}}\n    {{>field_color name=\"code_background\" value=_.code_background}}\n\n    <h4>code</h4>\n\n    {{>field_color name=\"mono_color\" value=_.mono_color}}\n    {{>field_color name=\"mono_background\" value=_.mono_background}}\n\n    <input type=\"hidden\" name=\":forward\" value=\"{{req_path \".\" \"ui-close\"}}\">\n    <input type=\"hidden\" name=\"_rt\" value=\"text/style\">\n\n    <br>\n    <button type=\"submit\">save</button>\n  </form>\n\n</body>\n</html>\n"
      },
      "d-editor-theme.hbs": {
        "_ct": "text/plain",
        "_pt": "resource/content",
        "_content": "/*\n.header-block.CodeMirror-line {\n  padding-top: 8px !important;\n  padding-bottom: 8px !important;\n}\n*/\n\n.sec_note-fulleditor {\n  max-width: 600px;\n}\n\n.CodeMirror-widget img {\n  display: inline-block;\n  max-width: 100%;\n}\n\n.CodeMirror-code {\n  font-size: {{_.body_size}}px;\n  color: {{_.body_color}};\n}\n\npre.CodeMirror-line {\n  font-family: {{_.body_name}};\n} \n\n.cm-header.cm-1 {\n  font-size: {{_.h1_size}}px;\n  font-family: {{_.h1_name}};\n  color: {{_.h1_color}};\n  font-weight: {{or _.h1_bold \"normal\"}};\n}\n\n.cm-header.cm-2 {\n  font-size: {{_.h2_size}}px;\n  font-family: {{_.h2_name}};\n  color: {{_.h2_color}};\n  font-weight: {{or _.h2_bold \"normal\"}};\n}\n\n.cm-header.cm-3 {\n  font-size: {{_.h3_size}}px;\n  font-family: {{_.h3_name}};\n  color: {{_.h3_color}};\n  font-weight: {{or _.h3_bold \"normal\"}};\n}\n\n.cm-header.cm-4 {\n  font-size: {{_.h4_size}}px;\n  font-family: {{_.h4_name}};\n  color: {{_.h4_color}};\n}\n\n.cm-bold {\n  font-weight: {{or _.strong_bold \"normal\"}};\n  color: {{_.strong_color}};\n}\n\n.cm-italic {\n  font-weight: {{or _.strong_bold \"normal\"}};\n  font-style: italic;\n  color: {{_.em_color}};\n}\n\n.cm-underlined {\n  font-weight: normal;\n  text-decoration: underline;\n}\n\n.cm-strikethrough {\n  text-decoration: line-through;\n}\n\n.cm-list {\n}\n\n.cm-list.cm-2 {\n}\n\n.cm-task-open {\n  font-family: monospace;\n  color: -webkit-link;\n}\n\n.cm-task-closed {\n  font-family: monospace;\n  color: -webkit-link;\n}\n\n.cm-link {\n  text-decoration: underline;\n  color: -webkit-link;\n}\n\n.cm-link-text {\n  color: -webkit-link;\n  text-decoration: underline;\n}\n\n.CodeMirror-widget a {\n  color: -webkit-link;\n  text-decoration: underline;\n}\n\n.cm-link-wikiname {\n  text-decoration: underline;\n  cursor: pointer;\n  color: -webkit-link;\n}\n\n.cm-at-tag {\n  background-color: lightgray;\n}\n\n.cm-hash-tag {\n  background-color: lightgray;\n}\n\n.cm-date-tag {\n  background-color: lightblue;\n}\n\n.cm-hash-tag.cm-DONE {\n  background-color: #8EFA00;\n}\n\n.cm-hash-line.cm-DONE {\n  background-color: #D5FAA2;\n}\n\n/* metadata fields */\n\n.cm-field-name {\n  background-color: lightgray;\n}\n\n.cm-metadata {\n  color: gray !important;\n  font-family: monospace !important;\n}\n\n/* property fields */\n\n.cm-property {\n  border-bottom: 1px solid lightgray !important;\n  color: gray !important;\n  font-family: monospace !important;\n}\n\n.cm-quote {\n  border-left: 10px solid black !important;\n  padding-left: 10px !important;\n}\n\n.cm-quote-1 {\n}\n\n.cm-table {\n  font-family: monospace !important;\n  background-color: {{_.code_background}};\n  white-space: pre !important;\n}\n\n.cm-code {\n  font-family: monospace;\n  color: {{_.mono_color}};\n  background-color: {{_.mono_background}};\n}\n\n.cm-code-block {\n  padding-left: 10px !important;\n  background-color: {{_.code_background}};\n}\n\n.cm-code-block .cm-code {\n  color: {{_.code_color}};\n  background-color: {{_.code_background}};\n}\n\n.cm-container-block {\n  padding-left: 10px !important;\n  background-color: lightgray;\n}\n\n/*\n  blocks can have a class\n  for example :::info would be mapped to cm-info\n*/\n\n.cm-container-block.cm-info {\n  background-color: #76D6FF;\n}\n\n/*\n  action blocks [[[ xxx ]]] are special type of inline blocks\n*/\n\n.cm-action-block {\n  background-color: black;\n  color: gray;\n  font-size: 15px;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  font-family: Helvetica Neue;\n  font-stretch: condensed;\n}\n\n.cm-action-block.cm-link a {\n  text-decoration: underline;\n  color: white;\n}\n\n.cm-hr {\n  border: 0;\n}\n\n.cm-hr.cm-line {\n  background-image:url(data:image/gif;base64,R0lGODdhBgADAKIAAAAAAMXFxsbGyP///wAAAAAAAAAAAAAAACH5BAkAAAQALAAAAAAGAAMAAAMHSLoR8mKtBAA7);\n  background-repeat:repeat-x;\n  background-position:center;\n}\n\n.cm-hr.cm-star {\n  background-image:url(data:image/gif;base64,R0lGODdhBgADAJEAAAAAAMXFxv///wAAACH5BAkAAAMALAAAAAAGAAMAAAIFnB+TeVcAOw==);\n  background-repeat:repeat-x;\n  background-position:center;\n}\n\n.cm-hr.cm-dash {\n  background-image:url(data:image/gif;base64,R0lGODdhBgADAJEAAAAAAMXFxv///wAAACH5BAkAAAMALAAAAAAGAAMAAAIFnB95awUAOw==);\n  background-repeat:repeat-x;\n  background-position:center;\n}\n\n.cm-section-separator {\n  text-align: right;\n  color: lightgray !important;\n  border-bottom: 1px solid lightgray !important;\n}\n"
      },
      "d-page-theme.hbs": {
        "_ct": "text/plain",
        "_pt": "resource/content",
        "_content": ".sec_note-body {\n  max-width: 600px;\n}\n\n.markdown {\n  font-size: {{_.body_size}}px;\n  font-family: {{_.body_name}};\n  color: {{_.body_color}};\n}\n\n.markdown p {\n  white-space: pre-wrap;\n  text-overflow: ellipsis;\n  overflow: clip;\n}\n\n.markdown a {\n  word-break: keep-all;\n}\n\n.markdown h1 {\n  font-size: {{_.h1_size}}px;\n  font-family: {{_.h1_name}};\n  color: {{_.h1_color}};\n}\n\n.markdown h2 {\n  font-size: {{_.h2_size}}px;\n  font-family: {{_.h2_name}};\n  color: {{_.h2_color}};\n}\n\n.markdown h3 {\n  font-size: {{_.h3_size}}px;\n  font-family: {{_.h3_name}};\n  color: {{_.h3_color}};\n}\n\n.markdown h4 {\n  font-size: {{_.h4_size}}px;\n  font-family: {{_.h4_name}};\n  color: {{_.h4_color}};\n}\n\n.markdown ul {\n  padding-inline-start: 16px;\n}\n\n.markdown em {\n  font-weight: {{or _.strong_bold \"normal\"}};\n  color: {{_.em_color}};\n}\n\n.markdown strong {\n  font-weight: {{or _.strong_bold \"normal\"}};\n  color: {{_.strong_color}};\n}\n\n.markdown code {\n  color: {{_.mono_color}};\n  background-color: {{_.mono_background}};\n}\n\n.markdown pre {\n  background-color: {{_.code_background}};\n  padding: 10px;\n}\n\n.markdown pre code {\n  color: {{_.code_color}};\n  background-color: {{_.code_background}};\n}\n\n.markdown {\n  padding: 15px;\n}\n\n.markdown img {\n  max-width: 100%;\n}\n\n.markdown table {\n  margin-top: 1em;\n  margin-bottom: 1em;\n}\n\n.markdown .md-date-tag {\n  font-weight: normal;\n  font-size: {{_.body_size}}px;\n  font-family: {{_.body_name}};\n  background-color: lightblue;\n  color: black;\n  text-decoration: none;\n}\n\n.markdown .md-hash-tag {\n  font-weight: normal;\n  font-size: {{_.body_size}}px;\n  font-family: {{_.body_name}};\n  background-color: lightgray;\n  color: black;\n  text-decoration: none;\n}\n\n.markdown .md-at-tag {\n  font-weight: normal;\n  font-size: {{_.body_size}}px;\n  font-family: {{_.body_name}};\n  background-color: lightgray;\n  color: black;\n  text-decoration: none;\n}\n\n.markdown hr {\n  border-top-width: 1px;\n  border-bottom-width: 0px;\n  border-style: dashed;\n  border-color: {{_.h1_color}};\n}"
      },
      "_cd": "1754746772551"
    },
    "_libs": {
      "_cd": "1756900433091",
      "_md": "1756900433091",
      "ui.css": {
        "_ct": "text/css",
        "_pt": "resource/content",
        "_content": "body.mode_balebaseapp.ui_dialog {\n  margin: 0;\n  border: 0;\n}\n\nhtml:has(body.mode_balebaseapp.ui_dialog) {\n  background-color: unset;\n}"
      }
    }
  },
  "notes-old": {
    "_md": "1755326847290",
    "item": {
      "_md": "1739693401317",
      "default.hbs": {
        "_ct": "text/plain",
        "_pt": "resource/content",
        "_content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n  <meta charset=\"utf-8\">\n  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1, maximum-scale=1\">\n  <link rel=\"icon\" href=\"data:;base64,iVBORw0KGgo=\">\n\n  {{include_css \"_libs/ui.css\"}}\n  {{include_css \"notes/_libs/codemirror.css\"}}\n  {{include_css \"notes/_libs/ui.css\"}}\n  \n  <style>{{include \"/content/style\" \"d-editor-theme\"}}</style>\n\n  <title>items</title>\n</head>\n\n<body class=\"page_note-item\" data-base_url=\"{{req_path \".\"}}\">\n\n  <div class=\"mode_balebaseapp-hidden\">\n    <a class=\"ui_button\" href=\"#\" id=\"toggle_filter-img\">show images</a>\n    <a class=\"ui_button act_popup-image-show\" href=\"{{req_path \".\" \"choose-image\"}}\" id=\"add_img\">images</a>\n    <a class=\"ui_button act_popup-tags-show\" data-pref=\"#\" href=\"{{req_path \"../../tags\" \"choose-tag\"}}\" id=\"add_tag\">tags</a>\n    <a class=\"ui_button act_popup-tags-show\" data-pref=\"@\" href=\"{{req_path \"../../refs\" \"choose-tag\"}}\" id=\"add_ref\">refs</a>\n\n    <a class=\"ui_button\" id=\"save_note\">done</a>\n  </div>\n\n  <div class=\"sec_note-fields mode_edit visible ui_group\" id=\"sec_fields_{{name}}\"> \n{{include path \"t-note-fields\"}}\n  </div>\n\n  <div class=\"sec_editor-container act_drop\">\n    <form method=\"post\" enctype=\"multipart/form-data\" action=\"{{res_path \".\"}}/{:image}/\" class=\"hidden\">\n      <input type=\"file\" name=\":filename\" value=\"\" data-drop_type=\"file\">\n      <input type=\"hidden\" name=\":image|newUUID\" value=\"\">\n      <input type=\"hidden\" name=\"_rt\" value=\"notes/image\">\n      <input type=\"hidden\" name=\"image_name@:filename\" value=\"\">\n    </form>\n\n    <div class=\"sec_note-fulleditor\">\n    <form method=\"post\" action=\"{{res_path \".\"}}\" id=\"editor_content\">\n      <textarea id=\"editor\" name=\"text.md/_content\" value=\"\" autocomplete=\"off\" placeholder=\"title\">{{include \".\" \"d-read-text\"}}</textarea>\n      <input type=\"hidden\" name=\":forward\" value=\"{{R.REF_URL}}\">\n      <input type=\"hidden\" name=\"_rt\" value=\"notes/item\">\n    </form>\n    </div>\n  </div>\n  <script>\n    startEditor(document.getElementById('editor'));\n    sendWindowMessage({viewMode:'edit'});\n  </script>\n\n  <div class=\"sec_note-footer\"></div>\n\n</body>\n</html>\n"
      },
      "pre-store.js": {
        "_ct": "text/javascript",
        "_pt": "resource/content",
        "_content": "(async function (res, writer, ctx) {\n  let text = res['text.md/_content'];\n  let path = ctx.getCurrentRequestPath();\n\n  if (text) {\n    let tags = [];\n    let refs = [];\n    let dtgs = [];\n\n    text = TextEntities.parse(text, function(word) {\n      if (word.charAt(0) == '@' && word.length > 2) {\n        refs.push(word.substr(1));\n      }\n      if (word.charAt(0) == '#' && word.length > 2) {\n        let nt = makeDateTag(word);\n        if (nt) {\n          dtgs.push(nt.substr(1));\n          if (nt != word) return nt;\n        }\n        else {\n          tags.push(word.substr(1));\n        }\n      }\n    });\n\n\n    let tres = {};\n    tres[':reset'] = path+'/ctags';\n    tres['../../tags/_rt'] = 'notes/tags';\n\n    for (let i = 0; i < tags.length; i++) {\n      let tag = tags[i];\n      tres['../../tags/'+tag+'/title'] = tag;\n      tres['../../tags/'+tag+'/_rt'] = 'notes/tag';\n\n      tres['ctags/'+tag+'/title'] = tag;\n    }\n\n    let dres = {};\n    dres[':reset'] = path+'/cdates';\n    dres['../../dates/_rt'] = 'notes/tags';\n\n    for (let i = 0; i < dtgs.length; i++) {\n      let tag = dtgs[i];\n      let tm = makeTimeStampFromTag(tag);\n      if (tm) {\n        dres['../../dates/'+tag+'/timedate'] = tm;\n      }\n      dres['../../dates/'+tag+'/title'] = tag;\n      dres['../../dates/'+tag+'/_rt'] = 'notes/tag';\n\n      dres['cdates/'+tag+'/title'] = tag;\n    }\n\n    let rres = {};\n    rres[':reset'] = path+'/crefs';\n    rres['../../refs/_rt'] = 'notes/tags';\n\n    for (let i = 0; i < refs.length; i++) {\n      let tag = refs[i];\n      rres['../../refs/'+tag+'/title'] = tag;\n      rres['../../refs/'+tag+'/_rt'] = 'notes/tag';\n\n      rres['crefs/'+tag+'/title'] = tag;\n    }\n\n    await ctx.storeResource(path, rres);\n    await ctx.storeResource(path, tres);\n    await ctx.storeResource(path, dres);\n  }\n\n  let t = (new Date().getTime());\n\n  res['_md'] = ''+t;\n  res['_search'] = text;\n\n  writer.write(res);\n  writer.end();\n});"
      },
      "t-content.hbs": {
        "_ct": "text/plain",
        "_pt": "resource/content",
        "_content": "{{include path \"d-format-text\"}}"
      },
      "d-format-text.js": {
        "_ct": "text/javascript",
        "_pt": "resource/content",
        "_content": "(async function (res, writer, ctx) {\n  let text = await ctx.resolveResourceContent(ctx.getCurrentResourcePath()+'/text.md');\n  let remap = {};\n  let c = 0;\n\n  let md = new marked.Marked(markedHighlight.markedHighlight({\n    emptyLangClass: 'hljs',\n    langPrefix: 'act_exec-code hljs language-',\n    highlight(code, lang, info) {\n      return code+'<div class=\"sec-code_content\">'+escape(code)+'</div>';\n    }\n  }));\n\n  text = ImageEntities.parse(text, function(word) {\n    let p = \"SDSEQWE\"+c+\"LJHG\";\n    c++\n\n    remap[p] = word;\n    return p;\n  });\n\n  for (let k in remap) {\n    let name = unescape(remap[k]);\n    let path = ctx.getCurrentResourcePath() + '/' + name;\n    let xref = await ctx.renderResource(path, 'externalize');    \n\n    text = text.replaceAll(k, xref.content);\n  }\n\n  text = TextEntities.parse(text, function(word) {\n    if (word.charAt(0) == '@' && word.length > 2) {\n      let qword = word.substr(1);\n      return `<a class=\"md-at-tag\" data-item_query=\"t=${qword}\" href=\"#\">${word}</a>`;\n    }\n    if (word.charAt(0) == '#' && word.length > 2) {\n      let qword = word.substr(1);\n      let dt = makeDateTag(qword);\n      if (dt) {\n        return `<a class=\"md-date-tag\" data-item_query=\"d=${dt}\" href=\"#\">${word}</a>`;\n      }\n      else {\n        return `<a class=\"md-hash-tag\" data-item_query=\"t=${qword}\" href=\"#\">${word}</a>`;\n      }\n    }\n  });\n\n  text = TextEntities.replaceAll(text);  \n  let html = md.parse(text);\n\n  writer.write(html);\n  writer.end();\n});"
      },
      "d-read-text.js": {
        "_ct": "text/javascript",
        "_pt": "resource/content",
        "_content": "(async function (res, writer, ctx) {\n  let text = await ctx.resolveResourceContent(ctx.getCurrentResourcePath()+'/text.md');\n\n  writer.write(text?text:'');\n  writer.end();\n});"
      },
      "choose-image.hbs": {
        "_ct": "text/plain",
        "_pt": "resource/content",
        "_content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n  <meta charset=\"utf-8\">\n  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n  <link rel=\"icon\" href=\"data:;base64,iVBORw0KGgo=\">\n\n  {{include_css \"notes/_libs/ui.css\"}}\n\n  <title>images</title>\n</head>\n\n<body>\n  <div>\n{{#include \".\" \"d-list-images\"}}\n    <span class=\"ui_thumbnail-small act_popup-item-sel\" data-item_ref=\"{{name}}/{{_.image_name}}\">\n      <img src=\"{{include path \"externalize\"}}\"></img>\n    </span>\n{{/include}}\n  </div>\n\n<div class=\"act_drop\">\n  <h3>upload image</h3>\n  \n  <form method=\"post\" enctype=\"multipart/form-data\" action=\"{{res_path \"{:image}\"}}/\">\n    <input type=\"file\" name=\":filename\" value=\"\" data-drop_type=\"file\">\n    <input type=\"hidden\" name=\":image|newUUID\" value=\"\">\n    <input type=\"hidden\" name=\"_rt\" value=\"notes/image\">\n\n    <input type=\"hidden\" name=\"image_name@:filename\" value=\"{{_.image_name}}\">\n    <input type=\"hidden\" name=\":forward\" value=\"{{req_path \".\"}}\">\n\n    <button type=\"submit\" class=\"ui_button\">add</button>\n  </form>\n</div>\n\n</body>\n</html>\n"
      },
      "t-tags.hbs": {
        "_ct": "text/plain",
        "_pt": "resource/content",
        "_content": "{{#include \"./etags\" \"children\"}}\n  <span class=\"ui_field-value\">\n    <span class=\"mode_view\">\n      <a href=\"{{req_path \".\" \"\"}}?t={{name}}\" class=\"ui_field-value-title\">{{name}}</a>\n    </span>\n    <span class=\"mode_edit\"> \n      <a href=\"{{req_path path}}\" class=\"ui_field-value-title\">{{name}}</a>\n      <a class=\"act_dialog-show\" target=\"_blank\" href=\"{{req_path path \"res-delete\"}}\">X</a>\n    </span>\n  </span>\n{{/include}}"
      },
      "t-note-item.hbs": {
        "_ct": "text/plain",
        "_pt": "resource/content",
        "_content": "<form method=\"post\" action=\"{{res_path \".\"}}\" id=\"clone_{{name}}\">\n  <input type=\"hidden\" name=\"_rt\" value=\"{{renderType}}\">\n  <input type=\"hidden\" name=\":name|newUUID\" value=\"\">\n  <input type=\"hidden\" name=\":copyto\" value=\"{{res_path \"../{:name}\"}}\">\n  <input type=\"hidden\" name=\":forward\" value=\"{{req_path \"./{:name}\"}}\">\n</form>\n\n<div class=\"sec_note-item\" data-item_ref=\"{{name}}\" id=\"{{name}}\" data-mode_id=\"sec_note_{{S.RENDER_COUNT}}\">\n  <div class=\"sec_note-fields clearfix\" id=\"sec_fields_{{name}}\">\n{{include path \"t-note-fields\"}}\n\n    <div class=\"mode_edit ui_actions-side\">\n      <a href=\"{{req_path path \"res-delete\"}}\" target=\"_blank\" class=\"ui_button\">remove</a>\n      <a href=\"{{req_path path \"merge\"}}/content/notes/items\" target=\"_blank\" class=\"ui_button\">merge</a>\n      <button type=\"submit\" form=\"clone_{{name}}\" class=\"ui_button\">clone</button>\n      <a href=\"#\" class=\"act_mode-toggle ui_button\" data-mode_sel=\"sec_note_{{S.RENDER_COUNT}}\" data-mode=\"edit\">close</a>\n    </div>\n\n    <div class=\"mode_view ui_actions-side\">\n      <a href=\"#\" class=\"act_mode-toggle ui_button\" data-mode_sel=\"sec_note_{{S.RENDER_COUNT}}\" data-mode=\"edit\">edit</a>\n    </div>\n\n  </div>\n  \n  <div class=\"mode_edit-list ui_actions-side\">\n    <a href=\"{{req_path path \"res-delete\"}}\" target=\"_blank\" class=\"ui_button\">X</a>\n  </div>\n\n  <div class=\"sec_note-body act_nav-item markdown\">     \n{{include path \"t-content\"}}\n  </div>\n</div>"
      },
      "d-list-images.js": {
        "_ct": "text/javascript",
        "_pt": "resource/content",
        "_content": "(async function (res, writer, ctx) {\n  writer.start('object/javascript');\n \n  let items = await ctx.listResources(ctx.getCurrentResourcePath(), (res) => {\n    return (res.renderType == 'notes/image');\n  });\n\n  writer.write(items);\n  writer.end();\n});"
      },
      "t-note-fields.hbs": {
        "_ct": "text/plain",
        "_pt": "resource/content",
        "_content": "<div class=\"sec_note-tags\">\n{{or _.title name}}\n  <input type=\"text\" form=\"editor_content\" name=\"title\" value=\"{{_.title}}\">\n      \n  <h3>tags:</h3>\n  {{include path \"t-tags\"}}\n\n  <span class=\"mode_edit\">\n\n  <form method=\"post\" action=\"{{res_path \"./etags\" \"{:name}\"}}\">\n    <input type=\"hidden\" name=\"/content/notes/tags/{:name}/title\" value=\"{:name}\">\n    <input type=\"hidden\" name=\"/content/notes/tags/{:name}/_rt\" value=\"notes/tag\">\n\n    <input type=\"hidden\" name=\":forward\" value=\"{{R.URL}}\">\n    <button class=\"act_popup-show\" name=\":name\" data-form=\"#editor_content\" data-path=\"{{req_path \"/content/notes/tags\" \"choose-tag\"}}\" type=\"button\">add</button>\n  </form>\n  </span>\n\n</div>\n\n<div>\n  <h3>date:</h3> \n  {{date modificationDate}}\n</div>"
      },
      "merge-item.js": {
        "_ct": "text/javascript",
        "_pt": "resource/content",
        "_content": "(async function (res, writer, ctx) {\n  let from = ctx.getCurrentRequestPath();\n  let to = res[':destination'];\n  if (from && to) {\n    let from_txt = await ctx.resolveResourceContent(from+'/text.md');\n    let to_txt = await ctx.resolveResourceContent(to+'/text.md');\n\n    if (to_txt) to_txt = from_txt + '\\n\\n---\\n\\n' + to_txt;\n\n    let nres = {\n      ':copyto':to,\n      ':forward':res[':forward'],\n      'text.md/_content':to_txt,\n      'text.md/_ct':'text/x-markdown'\n    };\n\n    writer.write(nres);\n    writer.end();    \n  }\n  else {\n    writer.write({});\n    writer.end();\n  }\n});"
      },
      "merge.hbs": {
        "_ct": "text/plain",
        "_pt": "resource/content",
        "_content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n  <meta charset=\"utf-8\">\n  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0\">\n  <link rel=\"icon\" href=\"data:;base64,iVBORw0KGgo=\">\n\n  {{include_css \"resource/res-ui.css\"}}\n\n  <title>merge with</title>\n</head>\n\n<body>\n  <h3>Copy \"{{name}}\"\n    <a class=\"button\" href=\"{{req_path \".\" \"ui-close\"}}\">cancel</a>\n  </h3>\n\n  <ol class=\"paths\">\n    <li>HOME / </li>\n{{#include \".\" \"parents\"}}\n    <li>{{name}} / </li>\n{{/include}}\n    <li>{{name}}</li>\n  </ol>\n\n  <h4>to</h4>\n\n  <ol class=\"paths\">\n    <li><a href=\"{{req_path \".\" \"res-copyto\"}}/\">HOME</a></li>\n{{#include R.DATA_PATH \"parents\"}}\n    <li><a href=\"{{req_path \".\" \"merge\"}}{{path}}\">{{name}}</a></li>\n{{/include}}\n    <li>{{R.DATA_NAME}}</li>\n  </ol>\n\n  <ol>\n{{#include R.DATA_PATH \"children\"}}\n  {{#if isContentResource}}\n    <li>{{name}}</li>\n  {{else}}\n    {{#match path \"!startsWith\" ../R.PATH}}\n    <li>\n      <a href=\"{{req_path \".\" \"merge\"}}{{path}}\">{{name}}</a>\n    </li>\n    {{/match}}\n  {{/if}}\n{{/include}}\n  </ol>\n\n  to: {{res_path R.DATA_PATH}}\n\n  <form method=\"post\" action=\"{{R.PATH}}\">\n    <input type=\"hidden\" name=\"_rt\" value=\"notes/item\">\n    <input type=\"hidden\" name=\":destination\" value=\"{{res_path R.DATA_PATH}}\">\n    <input type=\"hidden\" name=\":transform\" value=\"merge-item\">\n    <input type=\"hidden\" name=\":forward\" value=\"{{req_path \".\" \"ui-close\"}}\">\n\n    <button type=\"submit\">merge</button>\n  </form>\n\n</body>\n</html>\n"
      }
    },
    "items": {
      "_md": "1739693411398",
      "default.hbs": {
        "_ct": "text/plain",
        "_pt": "resource/content",
        "_content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n  <meta charset=\"utf-8\">\n  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1, maximum-scale=1\">\n  <link rel=\"icon\" href=\"data:;base64,iVBORw0KGgo=\">\n\n  {{include_css \"_libs/ui.css\"}}\n  {{include_css \"notes/_libs/codemirror.css\"}}\n  {{include_css \"notes/_libs/ui.css\"}}\n\n  <style>{{include \"/content/style\" \"d-page-theme\"}}</style>\n  <style>{{include \"/content/style\" \"d-editor-theme\"}}</style>\n\n  <title>items</title>\n</head>\n\n<body class=\"page_note-items {{include \"/config\" \"d-filter-class\"}}\" data-base_url=\"{{req_path \".\"}}\">\n\n  <div id=\"sec_note-actions\" class=\"mode_balebaseapp-hidden ui_group\">\n    <button type=\"submit\" form=\"new_note_content\" id=\"add_note\">add</button>\n    <a class=\"ui_button\" href=\"#\" id=\"toggle_filter-short\">short</a>\n    <a class=\"ui_button\" href=\"#\" id=\"toggle_filter-img\">show images</a>\n    <a class=\"ui_button\" href=\"#\" id=\"toggle_filter-cards\">show cards</a>\n    <a class=\"ui_button\" href=\"#\" id=\"toggle_filter-preview\">page preview</a>\n  </div> \n  \n  <div id=\"sec_note-list-info\" data-mode_id=\"sec_note-list-info\">\n{{include \".\" \"t-note-views\"}}\n{{include \".\" \"t-note-tree\"}}\n  </div>\n\n  <div id=\"sec_note-list\" data-mode_id=\"sec_note-list\" class=\"ui_group\">\n    <h3 class=\"mode_filter-preview-hidden\">notes:\n      <span class=\"mode_view-list ui_actions-side\">\n        <a href=\"#\" class=\"act_mode-toggle ui_button\" data-mode_sel=\"sec_note-list-info\" data-mode=\"show\">views</a>\n        <a href=\"#\" class=\"act_mode-toggle ui_button\" data-mode_sel=\"sec_note-list\" data-mode=\"edit-list\">edit</a>\n      </span>\n      <span class=\"mode_edit-list ui_actions-side\">\n        <a href=\"#\" class=\"act_mode-toggle ui_button\" data-mode_sel=\"sec_note-list\" data-mode=\"edit-list\">done</a>\n      </span>\n    </h3>\n\n    <form method=\"post\" action=\"{{res_path \".\" \"{:name}\"}}\" id=\"new_note_content\">\n      <input type=\"hidden\" name=\"text.md/_content\" value=\"\"></input>\n      <input type=\"hidden\" name=\":name|newUUID\" value=\"\">\n      <input type=\"hidden\" name=\":forward\" value=\"{{req_path \"./{:name}\"}}\">\n      <input type=\"hidden\" name=\"_rt\" value=\"notes/item\">\n    </form>\n\n{{#include \".\" \"d-list-items\"}}\n  {{include path \"t-note-item\"}}\n{{/include}}\n\n  </div>\n\n  <script>\n    sendWindowMessage({viewMode:'view'});\n    restoreViewMode();\n    restoreEditMode();\n    DraggableList.init();\n  </script>\n\n</body>\n</html>\n"
      },
      "d-list-items.js": {
        "_ct": "text/javascript",
        "_pt": "resource/content",
        "_content": "(async function (res, writer, ctx) {\n  writer.start('object/javascript');\n\n  let rv = [];\n  let children = await ctx.listResources('.', function(a) {\n    return (a.renderType == 'notes/item' || a.renderType == 'notes/items');\n  });\n\n  children.sort(function(a, b) {\n    return Utils.compareNames(a.name, b.name);\n  });\n\n  writer.write(children);\n})"
      },
      "t-note-views.hbs": {
        "_ct": "text/plain",
        "_pt": "resource/content",
        "_content": "<div class=\"sec_note-info ui_group\">\n    <h3>refs</h3>\n\n{{#include \"../refs\" \"d-list-tags\"}}\n    <div class=\"ui_field-value\">\n      <a href=\"{{req_path \".\" \"\"}}?t={{_.title}}\" class=\"ui_field-value-title\">{{_.title}}</a> \n      <a href=\"{{req_path path \"res-delete\"}}\" class=\"ui_command\" target=\"_blank\">X</a>\n    </div>\n{{/include}}\n    <a href=\"{{req_path \".\"}}\" class=\"ui_button\">clear</a>\n\n    <h3>views</h3>\n\n{{#include \"../views\" \"children\"}}\n    <a href=\"{{req_path path}}\">{{_.title}}</a> \n{{/include}}\n  |<a href=\"{{req_path \"../views\"}}\">edit</a>   \n\n    <h3>tags</h3>\n\n{{#include \"../tags\" \"d-list-tags\"}}\n    <div class=\"ui_field-value\">\n      <a href=\"{{req_path \".\" \"\"}}?t={{_.title}}\" class=\"ui_field-value-title\">{{_.title}}</a> \n      <a href=\"{{req_path path \"res-delete\"}}\" class=\"ui_command\" target=\"_blank\">X</a>\n    </div>\n{{/include}}\n    <a href=\"{{req_path \".\"}}\" class=\"ui_button\">clear</a> \n\n  <div class=\"sec_note-datelist\">\n    <h3>dates</h3>\n\n{{#include \"../dates\" \"d-list-dates\"}}\n  {{#if separator}}\n    <h3>\n      <a href=\"{{req_path \".\" \"\"}}?d={{_.title}}\" data-timedate=\"{{_.timedate}}\" class=\"ui_field-value-title\">Today</a> \n    </h3>\n  {{else}}\n    <div class=\"ui_field-value\">\n      <a href=\"{{req_path \".\" \"\"}}?d={{_.title}}\" data-timedate=\"{{_.timedate}}\" class=\"ui_field-value-title\">{{date _.timedate}}</a> \n      <a href=\"{{req_path path \"res-delete\"}}\" class=\"ui_command\" target=\"_blank\">X</a>\n    </div>\n  {{/if}}\n{{/include}}\n    <a href=\"{{req_path \".\"}}\" class=\"ui_button\">clear</a> \n  </div>\n\n</div>"
      },
      "print.hbs": {
        "_ct": "text/plain",
        "_pt": "resource/content",
        "_content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n  <meta charset=\"utf-8\">\n  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1, maximum-scale=1\">\n  <link rel=\"icon\" href=\"data:;base64,iVBORw0KGgo=\">\n\n  <title>print</title>\n</head>\n  <body>\n{{#include \".\" \"d-list-items\"}}\n  {{include path \"d-format-text\"}}\n{{/include}}\n  </body>\n</html>\n"
      },
      "t-note-tree.hbs": {
        "_ct": "text/plain",
        "_pt": "resource/content",
        "_content": "{{#partial \"note_item\"}}\n    <li class=\"ui_dragger-item ui_dragger-container\" data-item_ref=\"\\{{path}}\">\n      <a href=\"\\{{req_path path}}\">\\{{or _.title name}}</a>\n\n      <ul>\n  \\{{#include path \"notes/items\" \"d-list-items\"}}\n    \\{{>note_item path=path name=name}}\n  \\{{/include}}\n      </ul>\n    </li>\n{{/partial}}\n\n<div class=\"ui_group\">\n    <h3>tree</h3>\n\n<ul class=\"ui_draggable-list\">\n{{#include \"/content/notes/items\" \"d-list-items\"}}\n  {{>note_item path=path name=name}}\n{{/include}}\n</ul>\n\n</div>"
      },
      "d-filter-items.js": {
        "_ct": "text/javascript",
        "_pt": "resource/content",
        "_content": "(async function (res, writer, ctx) {\n  writer.start('object/javascript');\n  let q = ctx.getQueryProperty('q');\n  let t = ctx.getQueryProperty('t');\n  let d = ctx.getQueryProperty('d');\n  let v = ctx.getQueryProperty('view_path');\n\n  let f = ctx.getCurrentRequestPath();\n  if (v) f = v;\n\n  let fany = [];\n  let fall = [];\n  let fnot = [];\n  let fdat = [];\n\n  if (f != ctx.getCurrentResourcePath()) {\n    let filter = await ctx.renderResource(f, 'properties-all');\n    if (filter.content['any']) fany = Object.keys(filter.content.any);\n    if (filter.content['all']) fall = Object.keys(filter.content.all);\n    if (filter.content['not']) fnot = Object.keys(filter.content.not);\n  }\n\n  if (t) {\n    fany.push(t);\n  }\n\n  if (d) {\n    fdat.push(d);\n  }\n\n  let names = [];\n  let tags = [];\n\n  let filter_cb = function(path) {\n    let name = Utils.filename(path);\n\n    if (fany.length || fall.length || fnot.length || fdat.length) {\n      if (path.indexOf('/ctags/') > 1 || path.indexOf('/etags/') > 1 || path.indexOf('/crefs/') > 1 || path.indexOf('/cdates/') > 1) {\n        Utils.setObjectAtPath(tags, path.substr(1), {});\n      }\n    }\n    else if (name.startsWith('notes_item_'))  {\n      names.push(Utils.filename_path_append(ctx.getCurrentResourcePath(), path));\n    }\n    return false;\n  };\n\n  if (q) {\n    let sl = await ctx.searchResources('/index', q);\n    for (let i = 0; i < sl.length; i++) {\n      let it = sl[i];\n      let pp = matchPath(it.path, /(notes_item_.*)$/);\n      if (pp) filter_cb(pp);\n    }\n  }\n  else {\n    await ctx.listAllResourceNames(ctx.getCurrentResourcePath(), filter_cb);\n  }\n \n  if (fany.length || fall.length || fnot.length || fdat.length) {\n    let found = false;\n    for (let name in tags) {\n      let n = tags[name];\n      found = containsFilter(n, fany, fall, fnot, fdat);\n      if (found) {\n        names.push(ctx.getCurrentResourcePath()+'/'+name);\n      }\n    }\n  }\n\n  let items = await ctx.resolveResources(names);\n  items = items.sort((a, b) => {\n    return b['modificationDate'] - a['modificationDate'];\n  });\n\n  writer.write(items);\n  writer.end();\n});\n\nfunction matchPath(path, regexp) {\n  var a = path.match(regexp);\n  if (a && a.length == 2) return a[1];\n  else return null; \n}\n\nfunction containsFilterPath(tags, q) {\n  if (tags['ctags'] && tags['ctags'][q]) return true;\n  if (tags['etags'] && tags['etags'][q]) return true;\n  if (tags['crefs'] && tags['crefs'][q]) return true;\n  if (tags['cdates'] && tags['cdates'][q]) return true;\n  return false;\n}\n\nfunction containsFilter(tags, fany, fall, fnot, fdat) {\n  let found = false;\n  if (fany.length == 0 && fall.length == 0 && fdat.length == 0) found = true;\n\n  for (let i = 0; i < fdat.length; i++) {\n    let q = fdat[i];\n    if (containsFilterPath(tags, q)) {\n      found = true;\n      break;\n    }\n  }\n\n  for (let i = 0; i < fany.length; i++) {\n    let q = fany[i];\n    if (containsFilterPath(tags, q)) {\n      found = true;\n      break;\n    }\n  }\n\n  for (let i = 0; i < fall.length; i++) {\n    let q = fall[i];\n    if (!containsFilterPath(tags, q)) {\n      found = false;\n      break;\n    }\n    else {\n      found = true;\n    }\n  }\n\n  for (let i = 0; i < fnot.length; i++) {\n    let q = fnot[i];\n    if (containsFilterPath(tags, q)) {\n      found = false;\n      break;\n    }\n  }\n  return found;\n}"
      }
    },
    "tags": {
      "_md": "1739693475373",
      "d-list-tags.js": {
        "_ct": "text/javascript",
        "_pt": "resource/content",
        "_content": "(async function (res, writer, ctx) {\n  writer.start('object/javascript');\n\n  let items = await ctx.listResources(ctx.getCurrentResourcePath(), (it) => { \n    if(it.renderType == 'notes/tag') {\n      return true;\n    }\n    else {\n      return false;\n    }\n  });\n\n  writer.write(items);\n  writer.end();\n});"
      },
      "choose-tag.hbs": {
        "_ct": "text/plain",
        "_pt": "resource/content",
        "_content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n  <meta charset=\"utf-8\">\n  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n  <link rel=\"icon\" href=\"data:;base64,iVBORw0KGgo=\">\n\n  {{include_css \"_libs/ui.css\"}}\n  {{include_css \"notes/_libs/ui.css\"}}\n\n  <title>items</title>\n</head>\n\n<body>\n  <h1>tags</h1>\n\n{{#include \".\" \"d-list-tags\"}}\n  <div>\n    <a class=\"act_popup-item-sel\" data-item_ref=\"{{_.title}}\" href=\"#\">{{_.title}}</a> \n  </div>\n{{/include}}\n\n  <form method=\"post\" action=\"{{res_path \"../tags\" \"{:name}\"}}\">\n    <input type=\"text\"   name=\":name\" value=\"\" autocomplete=\"off\" placeholder=\"title\">\n    <input type=\"hidden\" name=\":forward\" value=\"{{req_path \".\"}}\">\n    <input type=\"hidden\" name=\"_rt\" value=\"notes/tag\">\n    <input type=\"hidden\" name=\"title\" value=\"{:name}\">\n\n    <button type=\"submit\">add</button>\n  </form>\n\n</body>\n</html>\n"
      },
      "d-list-dates.js": {
        "_ct": "text/javascript",
        "_pt": "resource/content",
        "_content": "(async function (res, writer, ctx) {\n  writer.start('object/javascript');\n  let items = [];\n\n  items.push({\n    separator:true,\n    _:{\n     title:'today',\n     timedate:(new Date().getTime())\n   }\n  });\n\n  await ctx.listResources(ctx.getCurrentResourcePath(), (it) => { \n    if(it.renderType == 'notes/tag') {\n      items.push(it);\n    }\n    return false;\n  });\n\n  items = items.sort(function(a, b) {\n    let av = a._['timedate'];\n    let bv = b._['timedate'];\n\n    if (!av) av = 0;\n    if (!bv) bv = 0;\n\n    return av - bv;\n  });\n\n  writer.write(items);\n  writer.end();\n});"
      }
    },
    "tag": {
      "_md": "1739693479931"
    },
    "_libs": {
      "_md": "1739883334452",
      "ui.css": {
        "_ct": "text/css",
        "_pt": "resource/content",
        "_content": "#ui_popup {\n  z-index: 999;\n  border: 0;\n  position: fixed;\n  display: none;\n  top: 0;\n  right: 0;\n  height: 100%;\n  width:60%;\n  box-sizing: border-box;\n  background-color: white;\n  box-shadow: -7px 0px 60px -3px rgb(0 0 0 / 50%);\n}\n\n#ui_popup.visible {\n  animation-name: slidein;\n  animation-duration: 0.2s;\n  display: block;\n}\n\n#ui_popup-background {\n  z-index: 998;\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n}\n\n.ui_thumbnail-small img {\n  max-height: 256px;\n}\n\n.ui_field-value {\n  padding: 1px 6px 1px 6px;\n  border: 1px solid black;\n  background-color: white;\n  display: inline-block;\n}\n\n.ui_field-value  a {\n    text-decoration: none;\n    color: black;\n}\n\nbody.mode_balebaseapp .mode_balebaseapp-hidden {\n  display: none;\n}\n\n.page_note-item {\n  margin: 0;\n}\n\n.page_note-items {\n  margin: 0;\n}\n\n.sec_img-frame {\n  display: inline-block;\n  overflow: hidden;\n}\n\n.sec_img-frame.cropped img {\n  max-width: unset !important;\n}\n\n.sec_note-tags form {\n  display: inline-block;\n}\n\n.sec_note-date {\n  color: lightgray;\n}\n\n.sec_note-item {\n  box-sizing: border-box;\n}\n\n.sec_note-info {\n  padding: 5px;\n}\n\n.sec_note-datelist .ui_field-value {\n  display: block;\n}\n\n.sec_note-datelist .ui_field-value .ui_command {\n  float: right;\n}\n\n#sec_note-list-info {\n  display: none;\n}\n\n#sec_note-list {\n  padding: 20px;\n}\n\n#sec_note-actions {\n  margin: 0;\n}\n\n@media screen and (min-width: 800px) {\n  #sec_note-actions {\n    position: fixed;\n    top: 0px;\n    left: 0px;\n    right: 0px;\n    background-color: white;\n    z-index: 1;\n  }\n\n  #sec_note-list-info {\n    position: fixed;\n    top: 40px;\n    width: 300px;\n    bottom: 0px;\n    display: unset;\n  }\n\n  #sec_note-list {\n    position: absolute;\n    top: 40px;\n    left: 300px;\n    right: 0px;\n  }\n}\n\n#sec_note-list-info.mode_show.visible {\n  display: block;\n\n  animation-name: slidetop;\n  animation-duration: 0.1s;\n  animation-timing-function: ease-in;\n}\n\n.sec_note-fields {\n  background-color: lightgray;\n  padding: 5px;\n}\n\n.mode_edit.visible .sec_note-fields {\n  background-color: inherit;\n  border-bottom: 1px solid lightgray;\n}\n\n.mode_edit.visible .sec_note-body {\n  cursor: text;\n  background-color: white;\n  padding: 5px;\n}\n\n.sec_note-fields h3 {\n  margin: 0;\n}\n\n.sec_note-lineeditor form {\n  border: 1px solid red;\n}\n\n.sec_note-lineeditor {\n  margin-bottom: 20px;\n}\n\n.sec_note-fulleditor {\n  margin: 20px;\n}\n\n.sec_board-container {\n  width: 100%;\n  overflow-x: scroll;\n}\n\n.sec_board-container table {\n  xxtable-layout: fixed;\n}\n\ntd.sec_board-view {\n  vertical-align: top;\n  min-width: 300px;\n}\n\n.ui_actions-side {\n  text-align: end;\n  float: right;\n}\n\n.clearfix::after {\n  content: \"\";\n  clear: both;\n  display: table;\n}\n\nbody.mode_filter-img .sec_note-fulleditor img {\n  max-height: 100px;\n  max-width: 100px;\n}\n\nbody.mode_filter-img .sec_note-body img {\n  max-height: 100px;\n  max-width: 100px;\n}\n\nbody.mode_filter-short .sec_note-body > * {\n  display: none;\n}\n\nbody.mode_filter-short .sec_note-body > :first-child {\n  display: initial;\n}\n\nbody.mode_filter-short .sec_note-body {\n  max-height: 60px;\n  overflow: hidden;\n}\n\n/* cards mode */\n\n.mode_filter-cards .sec_note-item {\n  display: inline-block;\n  height: 250px;\n  width: 250px;\n  overflow: hidden;\n  border: 1px solid red;\n  float: left;\n  margin: 5px;\n}\n\n.mode_filter-cards .sec_note-item .markdown {\n  padding: 2px;\n}\n\n.mode_filter-cards .sec_note-item .markdown > * {\n  margin: 2px;\n  font-size: smaller;\n}\n\n/* preview mode */\n\n.mode_filter-preview .sec_note-fields {\n  display: none;\n}\n\n.mode_filter-preview #sec_note-list-info {\n  display: none;\n}\n\n.mode_filter-preview .mode_filter-preview-hidden {\n  display: none;\n}\n\n.mode_filter-preview #sec_note-list {\n  position: revert;\n  top: revert;\n  left: revert;\n  right: revert;\n  padding: revert;\n}\n\n.mode_edit {\n  display: none;\n}\n\n.mode_edit.visible {\n  background-color: aliceblue;\n  border: 1px solid blue;\n  padding: 10px;\n  display: revert;\n\n  animation-name: reflow;\n  animation-duration: 0.1s;\n  animation-timing-function: ease-in;\n}\n\n.mode_edit.visible .mode_edit {\n  display: revert;\n}\n\n.mode_edit.visible .mode_view {\n  display: none;\n}\n\nbody.edit .mode_view .act_mode-toggle {\n  visibility: hidden;\n  xdisplay: none;\n}\n\nbody.edit .mode_edit-hidden {\n  display: none;\n}\n\n/* mode_edit-list */\n\n.mode_edit-list {\n  display: none;\n}\n\n.mode_edit-list.visible .mode_edit-list {\n  display: revert;\n}\n\n.mode_edit-list.visible .mode_view-list {\n  display: none;\n}\n\n.mode_edit-list.visible {\n  background-color: aliceblue;\n  border: 1px solid blue;\n  padding: 10px;\n  display: revert;\n\n  animation-name: reflow;\n  animation-duration: 0.1s;\n  animation-timing-function: ease-in;\n}\n\n.mode_edit-list.visible .sec_note-item .markdown {\n  padding: 5px;\n}\n\n.mode_edit-list.visible .sec_note-item {\n  margin-bottom: initial;\n  border-top: 1px solid gray;\n  background-color: white;\n}\n\n.mode_edit-list.visible .sec_note-fields .mode_edit {\n  display: none;\n}\n\n.mode_edit-list.visible .sec_note-fields {\n  display: none;\n}\n\n.mode_edit-list.visible .sec_note-body > * {\n  display: none;\n}\n\n.mode_edit-list.visible .sec_note-body > :first-child {\n  display: initial;\n  font-size: 13px;\n}\n\n.mode_edit-list.visible .sec_note-item {\n  max-height: 20px;\n  overflow: hidden;\n}\n\n.sec_group-heading.untitled {\n  display: none;\n}\n\n.sec_note-footer {\n  border-top: 1px solid gray;\n}\n\n.sec-code_content {\n  display: none;\n}\n\n.loaded {\n  xanimation-name: reveal;\n  xanimation-duration: 0.3s;\n  xanimation-timing-function: ease-in;\n}\n\n.sec_editor-container {\n  border: 1px solid white;\n}\n\n.hidden {\n  display: none;\n}\n\n.dropping {\n  border: 1px solid red;\n}\n\n@keyframes reveal {\n  from {\n    opacity: 0;\n  }\n\n  to {\n    opacity: 1;\n  }\n}\n\n@keyframes slidetop {\n  from {\n    opacity: 0.5;\n    transform-origin: top;\n    transform: scale(1, 0.5);\n  }\n\n  to {\n    opacity: 1;\n    transform-origin: top;\n    transform: scale(1, 1);\n  }\n}\n\n@keyframes reflow {\n  from {\n    opacity: 0.5;\n    //scale: 1.1;\n    transform-origin: center;\n    transform: scale(1.1, 1.1);\n  }\n\n  to {\n    opacity: 1;\n    //scale: 1;\n\n    transform-origin: center;\n    transform: scale(1, 1);\n  }\n}\n\n@keyframes slidein {\n  from {\n    opacity: 0;\n    right: -30%;\n  }\n\n  to {\n    opacity: 1;\n    right: 0;\n  }\n}\n\n@media only screen and (hover: none) {\n  body {\n    font-family: system-ui;\n    zoom: 140%;\n  }\n}"
      },
      "codemirror.css": {
        "_ct": "text/css",
        "_pt": "resource/content",
        "_content": "/* BASICS */\n\n.CodeMirror {\n  /* Set height, width, borders, and global font properties here */\n  /*font-family: monospace;*/\n  /*height: 300px;*/\n  color: black;\n  direction: ltr;\n}\n\n/* PADDING */\n\n.CodeMirror-lines {\n  padding: 4px 0; /* Vertical padding around content */\n}\n.CodeMirror pre.CodeMirror-line,\n.CodeMirror pre.CodeMirror-line-like {\n  padding: 0 4px; /* Horizontal padding of content */\n}\n\n.CodeMirror-scrollbar-filler, .CodeMirror-gutter-filler {\n  background-color: white; /* The little square between H and V scrollbars */\n}\n\n/* GUTTER */\n\n.CodeMirror-gutters {\n  border-right: 1px solid #ddd;\n  background-color: #f7f7f7;\n  white-space: nowrap;\n}\n.CodeMirror-linenumbers {}\n.CodeMirror-linenumber {\n  padding: 0 3px 0 5px;\n  min-width: 20px;\n  text-align: right;\n  color: #999;\n  white-space: nowrap;\n}\n\n.CodeMirror-guttermarker { color: black; }\n.CodeMirror-guttermarker-subtle { color: #999; }\n\n/* CURSOR */\n\n.CodeMirror-cursor {\n  border-left: 1px solid black;\n  border-right: none;\n  width: 0;\n}\n/* Shown when moving in bi-directional text */\n.CodeMirror div.CodeMirror-secondarycursor {\n  border-left: 1px solid silver;\n}\n.cm-fat-cursor .CodeMirror-cursor {\n  width: auto;\n  border: 0 !important;\n  background: Highlight;\n}\n.cm-fat-cursor div.CodeMirror-cursors {\n  z-index: 1;\n}\n.cm-fat-cursor-mark {\n  background-color: rgba(20, 255, 20, 0.5);\n  -webkit-animation: blink 1.06s steps(1) infinite;\n  -moz-animation: blink 1.06s steps(1) infinite;\n  animation: blink 1.06s steps(1) infinite;\n}\n.cm-animate-fat-cursor {\n  width: auto;\n  -webkit-animation: blink 1.06s steps(1) infinite;\n  -moz-animation: blink 1.06s steps(1) infinite;\n  animation: blink 1.06s steps(1) infinite;\n  background-color: Highlight;\n}\n@-moz-keyframes blink {\n  0% {}\n  50% { background-color: transparent; }\n  100% {}\n}\n@-webkit-keyframes blink {\n  0% {}\n  50% { background-color: transparent; }\n  100% {}\n}\n@keyframes blink {\n  0% {}\n  50% { background-color: transparent; }\n  100% {}\n}\n\n/* Can style cursor different in overwrite (non-insert) mode */\n.CodeMirror-overwrite .CodeMirror-cursor {}\n\n.cm-tab { display: inline-block; text-decoration: inherit; }\n\n.CodeMirror-rulers {\n  position: absolute;\n  left: 0; right: 0; top: -50px; bottom: 0;\n  overflow: hidden;\n}\n.CodeMirror-ruler {\n  border-left: 1px solid #ccc;\n  top: 0; bottom: 0;\n  position: absolute;\n}\n\n/* DEFAULT THEME */\n/* XXX\n.cm-s-default .cm-header {color: blue;}\n.cm-s-default .cm-quote {color: #090;}\n.cm-negative {color: #d44;}\n.cm-positive {color: #292;}\n.cm-header, .cm-strong {font-weight: bold;}\n.cm-em {font-style: italic;}\n.cm-link {text-decoration: underline;}\n.cm-strikethrough {text-decoration: line-through;}\n\n.cm-s-default .cm-keyword {color: #708;}\n.cm-s-default .cm-atom {color: #219;}\n.cm-s-default .cm-number {color: #164;}\n.cm-s-default .cm-def {color: #00f;}\n.cm-s-default .cm-variable,\n.cm-s-default .cm-punctuation,\n.cm-s-default .cm-property,\n.cm-s-default .cm-operator {}\n.cm-s-default .cm-variable-2 {color: #05a;}\n.cm-s-default .cm-variable-3, .cm-s-default .cm-type {color: #085;}\n.cm-s-default .cm-comment {color: #a50;}\n.cm-s-default .cm-string {color: #a11;}\n.cm-s-default .cm-string-2 {color: #f50;}\n.cm-s-default .cm-meta {color: #555;}\n.cm-s-default .cm-qualifier {color: #555;}\n.cm-s-default .cm-builtin {color: #30a;}\n.cm-s-default .cm-bracket {color: #997;}\n.cm-s-default .cm-tag {color: #170;}\n.cm-s-default .cm-attribute {color: #00c;}\n.cm-s-default .cm-hr {color: #999;}\n.cm-s-default .cm-link {color: #00c;}\n*/\n\n.CodeMirror-line.cm-align-center {\n  text-align: center !important;\n}\n\n.CodeMirror-line.cm-align-right {\n  text-align: right !important;\n}\n\n.cm-link {\n  cursor: pointer;\n}\n\n.cm-task-open, .cm-task-closed {\n  cursor: pointer;\n}\n\n.CodeMirror .cm-spell-error {\n  border-bottom: 1px dotted red;\n}\n\n.cm-s-default .cm-error {color: #f00;}\n.cm-invalidchar {color: #f00;}\n\n.CodeMirror-composing { border-bottom: 2px solid; }\n\n/* Default styles for common addons */\n\ndiv.CodeMirror span.CodeMirror-matchingbracket {color: #0b0;}\ndiv.CodeMirror span.CodeMirror-nonmatchingbracket {color: #a22;}\n.CodeMirror-matchingtag { background: rgba(255, 150, 0, .3); }\n.CodeMirror-activeline-background {background: #e8f2ff;}\n\n/* STOP */\n\n/* The rest of this file contains styles related to the mechanics of\n   the editor. You probably shouldn't touch them. */\n\n.CodeMirror {\n  position: relative;\n  overflow: hidden;\n  background: white;\n}\n\n.CodeMirror-scroll {\n  overflow: scroll !important; /* Things will break if this is overridden */\n  /* 50px is the magic margin used to hide the element's real scrollbars */\n  /* See overflow: hidden in .CodeMirror */\n  margin-bottom: -50px; margin-right: -50px;\n  padding-bottom: 50px;\n  height: 100%;\n  outline: none; /* Prevent dragging from highlighting the element */\n  position: relative;\n}\n.CodeMirror-sizer {\n  position: relative;\n  border-right: 50px solid transparent;\n}\n\n/* The fake, visible scrollbars. Used to force redraw during scrolling\n   before actual scrolling happens, thus preventing shaking and\n   flickering artifacts. */\n.CodeMirror-vscrollbar, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-gutter-filler {\n  position: absolute;\n  z-index: 6;\n  display: none;\n  outline: none;\n}\n.CodeMirror-vscrollbar {\n  right: 0; top: 0;\n  overflow-x: hidden;\n  overflow-y: scroll;\n}\n.CodeMirror-hscrollbar {\n  bottom: 0; left: 0;\n  overflow-y: hidden;\n  overflow-x: scroll;\n}\n.CodeMirror-scrollbar-filler {\n  right: 0; bottom: 0;\n}\n.CodeMirror-gutter-filler {\n  left: 0; bottom: 0;\n}\n\n.CodeMirror-gutters {\n  position: absolute; left: 0; top: 0;\n  min-height: 100%;\n  z-index: 3;\n}\n.CodeMirror-gutter {\n  white-space: normal;\n  height: 100%;\n  display: inline-block;\n  vertical-align: top;\n  margin-bottom: -50px;\n}\n.CodeMirror-gutter-wrapper {\n  position: absolute;\n  z-index: 4;\n  background: none !important;\n  border: none !important;\n}\n.CodeMirror-gutter-background {\n  position: absolute;\n  top: 0; bottom: 0;\n  z-index: 4;\n}\n.CodeMirror-gutter-elt {\n  position: absolute;\n  cursor: default;\n  z-index: 4;\n}\n.CodeMirror-gutter-wrapper ::selection { background-color: transparent }\n.CodeMirror-gutter-wrapper ::-moz-selection { background-color: transparent }\n\n.CodeMirror-lines {\n  cursor: text;\n  min-height: 1px; /* prevents collapsing before first draw */\n}\n.CodeMirror pre.CodeMirror-line,\n.CodeMirror pre.CodeMirror-line-like {\n  /* Reset some styles that the rest of the page might have set */\n  -moz-border-radius: 0; -webkit-border-radius: 0; border-radius: 0;\n  border-width: 0;\n  /*background: transparent;*/ //XXX\n  font-family: inherit;\n  font-size: inherit;\n  margin: 0;\n  white-space: pre;\n  word-wrap: normal;\n  line-height: inherit;\n  color: inherit;\n  z-index: 2;\n  position: relative;\n  overflow: visible;\n  -webkit-tap-highlight-color: transparent;\n  -webkit-font-variant-ligatures: contextual;\n  font-variant-ligatures: contextual;\n}\n.CodeMirror-wrap pre.CodeMirror-line,\n.CodeMirror-wrap pre.CodeMirror-line-like {\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  word-break: normal;\n}\n\n.CodeMirror-linebackground {\n  position: absolute;\n  left: 0; right: 0; top: 0; bottom: 0;\n  z-index: 0;\n}\n\n.CodeMirror-linewidget {\n  position: relative;\n  z-index: 2;\n  padding: 0.1px; /* Force widget margins to stay inside of the container */\n}\n\n.CodeMirror-widget {\n  display: inline-block;\n}\n\n.CodeMirror-rtl pre { direction: rtl; }\n\n.CodeMirror-code {\n  outline: none;\n}\n\n/* Force content-box sizing for the elements where we expect it */\n.CodeMirror-scroll,\n.CodeMirror-sizer,\n.CodeMirror-gutter,\n.CodeMirror-gutters,\n.CodeMirror-linenumber {\n  -moz-box-sizing: content-box;\n  box-sizing: content-box;\n}\n\n.CodeMirror-measure {\n  position: absolute;\n  width: 100%;\n  height: 0;\n  overflow: hidden;\n  visibility: hidden;\n}\n\n.CodeMirror-cursor {\n  position: absolute;\n  pointer-events: none;\n}\n.CodeMirror-measure pre { position: static; }\n\ndiv.CodeMirror-cursors {\n  visibility: hidden;\n  position: relative;\n  z-index: 3;\n}\ndiv.CodeMirror-dragcursors {\n  visibility: visible;\n}\n\n.CodeMirror-focused div.CodeMirror-cursors {\n  visibility: visible;\n}\n\n.CodeMirror-selected { background: SelectedItem; }\n.CodeMirror-focused .CodeMirror-selected { background: Highlight; }\n.CodeMirror-crosshair { cursor: crosshair; }\n.CodeMirror-line::selection, .CodeMirror-line > span::selection, .CodeMirror-line > span > span::selection { background: Highlight; }\n.CodeMirror-line::-moz-selection, .CodeMirror-line > span::-moz-selection, .CodeMirror-line > span > span::-moz-selection { background: Highlight; }\n\n.cm-searching {\n  background-color: #ffa;\n  background-color: rgba(255, 255, 0, .4);\n}\n\n/* Used to force a border model for a node */\n.cm-force-border { padding-right: .1px; }\n\n@media print {\n  /* Hide the cursor when printing */\n  .CodeMirror div.CodeMirror-cursors {\n    visibility: hidden;\n  }\n}\n\n/* See issue #2901 */\n.cm-tab-wrap-hack:after { content: ''; }\n\n/* Help users use markselection to safely style text background */\nspan.CodeMirror-selectedtext { background: none; }\n"
      },
      "theme.css": {
        "_ct": "text/css",
        "_pt": "resource/content",
        "_content": ".cm-header {\n  font-family: Helvetica Neue;\n  font-stretch: condensed;\n}\n\n.cm-header.cm-1 {\n  font-size: 2em;\n}\n\n.cm-header.cm-2 {\n  font-size: 1.5em;\n}\n\n.cm-header.cm-3 {\n  font-size: 1.17em;\n}\n\n.cm-header.cm-4 {\n  font-weight: bold;\n}\n\n.cm-bold {\n  font-weight: bold;\n}\n\n.cm-underlined {\n  font-weight: normal;\n  text-decoration: underline;\n}\n\n.cm-italic {\n  font-style: italic;\n  color: gray;\n}\n\n.cm-strikethrough {\n  text-decoration: line-through;\n}\n\n.cm-code {\n  font-family: monospace;\n  color: gray;\n}\n\n.cm-list {\n}\n\n.cm-list.cm-2 {\n}\n\n.cm-task-open {\n  font-family: monospace;\n  color: -webkit-link;\n}\n\n.cm-task-closed {\n  font-family: monospace;\n  color: -webkit-link;\n}\n\n.cm-link {\n  text-decoration: underline;\n  color: -webkit-link;\n}\n\n.cm-link-text {\n  color: -webkit-link;\n}\n\n.cm-link-wikiname {\n  text-decoration: underline;\n  cursor: pointer;\n  color: -webkit-link;\n}\n\n.cm-at-tag {\n  background-color: lightgray;\n}\n\n.cm-hash-tag {\n  background-color: lightgray;\n}\n\n.cm-hash-tag.cm-DONE {\n  background-color: #8EFA00;\n}\n\n.cm-hash-line.cm-DONE {\n  background-color: #D5FAA2;\n}\n\n/* metadata fields */\n\n.cm-field-name {\n  background-color: lightgray;\n}\n\n.cm-metadata {\n  color: gray !important;\n  font-family: monospace !important;\n}\n\n/* property fields */\n\n.cm-property {\n  border-bottom: 1px solid lightgray !important;\n  color: gray !important;\n  font-family: monospace !important;\n}\n\n.cm-quote {\n  border-left: 10px solid black !important;\n  padding-left: 10px !important;\n}\n\n.cm-quote-1 {\n}\n\n.cm-code-block {\n  padding-left: 10px !important;\n  background-color: lightgray;\n}\n\n.cm-container-block {\n  padding-left: 10px !important;\n  background-color: lightgray;\n}\n\n/*\n  blocks can have a class\n  for example :::info would be mapped to cm-info\n*/\n\n.cm-container-block.cm-info {\n  background-color: #76D6FF;\n}\n\n/*\n  action blocks [[[ xxx ]]] are special type of inline blocks\n*/\n\n.cm-action-block {\n  background-color: black;\n  color: gray;\n  font-size: 15px;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  font-family: Helvetica Neue;\n  font-stretch: condensed;\n}\n\n.cm-action-block.cm-link a {\n  text-decoration: underline;\n  color: white;\n}\n\n.cm-hr {\n  border: 0;\n}\n\n.cm-hr.cm-line {\n  background-image:url(data:image/gif;base64,R0lGODdhBgADAKIAAAAAAMXFxsbGyP///wAAAAAAAAAAAAAAACH5BAkAAAQALAAAAAAGAAMAAAMHSLoR8mKtBAA7);\n  background-repeat:repeat-x;\n  background-position:center;\n}\n\n.cm-hr.cm-star {\n  background-image:url(data:image/gif;base64,R0lGODdhBgADAJEAAAAAAMXFxv///wAAACH5BAkAAAMALAAAAAAGAAMAAAIFnB+TeVcAOw==);\n  background-repeat:repeat-x;\n  background-position:center;\n}\n\n.cm-hr.cm-dash {\n  background-image:url(data:image/gif;base64,R0lGODdhBgADAJEAAAAAAMXFxv///wAAACH5BAkAAAMALAAAAAAGAAMAAAIFnB95awUAOw==);\n  background-repeat:repeat-x;\n  background-position:center;\n}\n\n.cm-section-separator {\n  text-align: right;\n  color: lightgray !important;\n  border-bottom: 1px solid lightgray !important;\n}\n"
      }
    },
    "image": {
      "_md": "1740518520868",
      "default.hbs": {
        "_ct": "text/plain",
        "_pt": "resource/content",
        "_content": "<img src=\"{{include _.image_name \"externalize\"}}\">"
      },
      "externalize.js": {
        "_ct": "text/javascript",
        "_pt": "resource/content",
        "_content": "(function (res, writer, ctx) {\n  let path = ctx.getCurrentResourcePath()+'/'+res._['image_name'];\n  ctx.renderResource(path, null, 'externalize').then((r) => {\n    writer.start(r.contentType);\n    writer.write(r.content);\n    writer.end();\n  });\n});\n"
      }
    },
    "views": {
      "_md": "1741371591392",
      "default.hbs": {
        "_ct": "text/plain",
        "_pt": "resource/content",
        "_content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n  <meta charset=\"utf-8\">\n  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n  <link rel=\"icon\" href=\"data:;base64,iVBORw0KGgo=\">\n\n  {{include_css \"notes/_libs/ui.css\"}}\n\n  <title>boards</title>\n</head>\n\n<body>\n  <h1>views</h1>\n\n{{#include \".\" \"children\"}}\n  <div>\n    <a href=\"{{req_path path}}\">{{_.title}}</a>\n    <a href=\"{{req_path path \"res-delete\"}}\">X</a>\n  </div>\n{{/include}}\n\n  <form method=\"post\" action=\"{{res_path \".\" \"{:name}\"}}\">\n    <input type=\"text\"   name=\":name\" value=\"\" autocomplete=\"off\" placeholder=\"title\">\n    <input type=\"hidden\" name=\":forward\" value=\"{{req_path \".\"}}\">\n    <input type=\"hidden\" name=\"_rt\" value=\"notes/view\">\n    <input type=\"hidden\" name=\"title\" value=\"{:name}\">\n\n    <button type=\"submit\">add</button>\n  </form>\n\n</body>\n</html>"
      }
    },
    "view": {
      "_md": "1741502553530",
      "default.hbs": {
        "_ct": "text/plain",
        "_pt": "resource/content",
        "_content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n  <meta charset=\"utf-8\">\n  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n  <link rel=\"icon\" href=\"data:;base64,iVBORw0KGgo=\">\n\n  {{include_css \"notes/_libs/ui.css\"}}\n\n  <style>{{include \"../../style\" \"d-page-theme\"}}</style>\n\n  <title>views</title>\n</head>\n\n<body data-base_url=\"{{req_path \"../../items\"}}\">\n  <h1>view: {{_.title}}</h1>\n  \n  <a href=\"{{req_path \"../../items\"}}\">all</a>\n  |<a href=\"{{req_path \".\" \"edit\"}}\">edit</a>\n\n  <div id=\"sec_note-list\" data-mode_id=\"sec_note-list\">\n    <h3>notes:\n      <span class=\"mode_view ui_actions-side\">\n        <a href=\"#\" class=\"act_mode-toggle ui_button\" data-mode_sel=\"sec_note-list\" data-mode=\"edit\">edit</a>\n        <button type=\"submit\" form=\"editor_content\">add</button>\n      </span>\n      <span class=\"mode_edit ui_actions-side\">\n        <a href=\"#\" class=\"act_mode-toggle ui_button\" data-mode_sel=\"sec_note-list\" data-mode=\"edit\">done</a>\n      </span>\n    </h3>\n\n    <form method=\"post\" action=\"{{res_path \".\" \"{:name}\"}}\" id=\"editor_content\">\n      <input type=\"hidden\" name=\"text.md/_content\" value=\"\"></input>\n      <input type=\"hidden\" name=\":name|newUUID\" value=\"\">\n      <input type=\"hidden\" name=\":forward\" value=\"{{req_path \"./{:name}\"}}\">\n      <input type=\"hidden\" name=\"_rt\" value=\"notes/item\">\n    </form>\n\n    <script>\n      sendWindowMessage({viewMode:'view'});\n    </script>\n\n{{#include \"../../items\" \"d-list-items\"}}\n  {{include path \"t-note-item\"}}\n{{/include}}\n\n  </div>\n  \n</body>\n</html>"
      },
      "filter": {
        "_md": "1741502937755",
        "t-edit-filter.hbs": {
          "_ct": "text/plain",
          "_pt": "resource/content",
          "_content": "{{#include \".\" \"children\"}}\n  <div class=\"ui_field-value\">\n    <span class=\"ui_field-value-title\">{{name}}</span>\n        <a href=\"{{req_path path \"res-delete\"}}\">X</a>\n  </div>\n{{/include}}  \n\n<form method=\"post\" action=\"{{res_path \".\" \"{:name}\"}}\">\n    <input type=\"hidden\" name=\":forward\" value=\"{{req_path \".\"}}\">\n    <button class=\"act_popup-show\" name=\":name\" data-path=\"{{req_path \"/content/notes/tags\" \"choose-tag\"}}\" type=\"button\">add</button>\n  </form>"
        }
      },
      "edit.hbs": {
        "_ct": "text/plain",
        "_pt": "resource/content",
        "_content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n  <meta charset=\"utf-8\">\n  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n  <link rel=\"icon\" href=\"data:;base64,iVBORw0KGgo=\">\n\n  {{include_css \"notes/_libs/ui.css\"}}\n\n  <title>views</title>\n</head>\n\n<body>\n  <h1>view</h1>\n\n  <form method=\"post\" action=\"{{res_path \".\"}}\">\n    <input type=\"hidden\" name=\":forward\" value=\"{{req_path \".\" \"ui-close\"}}\">\n    <input type=\"text\" name=\"title\" value=\"{{_.title}}\">\n\n    <button type=\"submit\">save</button>\n  </form>\n\n  <h3>include all</h3>\n  {{include \"all\" \"notes/view/filter\" \"t-edit-filter\"}}\n\n\n  <h3>include any</h3>\n  {{include \"any\" \"notes/view/filter\" \"t-edit-filter\"}}\n\n\n  <h3>exlude</h3>\n  {{include \"not\" \"notes/view/filter\" \"t-edit-filter\"}}\n\n\n  <a class=\"ui_button\" href=\"{{req_path \".\" \"ui-close\"}}\">done</a>\n\n</body>\n</html>"
      }
    },
    "dates": {
      "_md": "1741633890515",
      "default.hbs": {
        "_ct": "text/plain",
        "_pt": "resource/content",
        "_content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n  <meta charset=\"utf-8\">\n  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n  <link rel=\"icon\" href=\"data:;base64,iVBORw0KGgo=\">\n\n  {{include_css \"notes/_libs/ui.css\"}}\n\n  <style>{{include \"../../style\" \"d-page-theme\"}}</style>\n\n  <title>dates</title>\n</head>\n\n<body>\n  <h1>dates</h1>\n  \n  <table>\n{{#include \".\" \"d-today\"}}\n  {{today}}\n  {{#each days}}\n    <tr>\n    {{#each days}}\n  <td>{{this}}</td>\n    {{/each}}\n    </tr>\n  {{/each}}\n{{/include}}\n  </table>\n\n\n</body>\n</html>"
      },
      "d-today.js": {
        "_ct": "text/javascript",
        "_pt": "resource/content",
        "_content": "(function (res, writer, ctx) {\n  let date = new Date();\n  let year = date.getFullYear();\n  let month = date.getMonth();\n\n  let firstDay = new Date(year, month, 1);\n  let lastDay = new Date(year, month + 1, 0);\n  let firstDayIndex = firstDay.getDay(); //4\n  let numberOfDays = lastDay.getDate(); //31\n\n  let days = [\n    {days:['Mon','Tue','Wed','Thu','Fri','Sat','Sun']},\n    {days:[]},\n    {days:[]},\n    {days:[]},\n    {days:[]},\n    {days:[]},\n    {days:[]}\n  ];\n\n  let dt = firstDay.toLocaleString(\"en-US\", {\n    month: \"long\",\n    year: \"numeric\"\n  });\n\n\n  for (let i = 1; i < firstDayIndex; i++) {\n    days[1].days.push('');\n  }\n\n  let z = 1;\n  for (let i = 1; i <= numberOfDays; i++) {\n    let d = new Date(year, month, i);\n    if (days[z].days.length > 6) z++;\n    days[z].days.push(d.getDate());\n  }\n\n  for (;days[z].days.length < 7;) {\n    days[z].days.push('');\n  }\n\n  writer.start('object/javascript');\n  writer.write({today:dt, days:days});\n  writer.end();\n});"
      }
    },
    "search.js": {
      "_ct": "text/plain",
      "_pt": "resource/content",
      "_content": "(function (res, writer, ctx) {\n  let args = ctx.getQueryProperties();\n  let rurl = location.href;\n\n  rurl = rurl.substr(0, rurl.lastIndexOf('.@'));\n\n  if (args && args['q']) {\n    let q = args['q'];\n    rurl += '/items?q='+escape(q);\n  }\n  else {\n    rurl += '/items';\n  }\n\n  ctx.forwardRequest(rurl);\n  writer.end();\n});"
    },
    "boards": {
      "_md": "1745504007222",
      "default.hbs": {
        "_ct": "text/plain",
        "_pt": "resource/content",
        "_content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n  <meta charset=\"utf-8\">\n  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n  <link rel=\"icon\" href=\"data:;base64,iVBORw0KGgo=\">\n\n  {{include_css \"notes/_libs/ui.css\"}}\n\n  <title>views</title>\n</head>\n\n<body>\n  <h1>views</h1>\n\n{{#include \".\" \"children\"}}\n  <div>\n    <a href=\"{{req_path path}}\">{{_.title}}</a>\n    <a href=\"{{req_path path \"res-delete\"}}\">X</a>\n  </div>\n{{/include}}\n\n  <form method=\"post\" action=\"{{res_path \".\" \"{:name}\"}}\">\n    <input type=\"text\"   name=\":name\" value=\"\" autocomplete=\"off\" placeholder=\"title\">\n    <input type=\"hidden\" name=\":forward\" value=\"{{req_path \".\"}}\">\n    <input type=\"hidden\" name=\"_rt\" value=\"notes/board\">\n    <input type=\"hidden\" name=\"title\" value=\"{:name}\">\n\n    <button type=\"submit\">add</button>\n  </form>\n\n</body>\n</html>"
      }
    },
    "board": {
      "_md": "1745504090999",
      "default.hbs": {
        "_ct": "text/plain",
        "_pt": "resource/content",
        "_content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n  <meta charset=\"utf-8\">\n  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n  <link rel=\"icon\" href=\"data:;base64,iVBORw0KGgo=\">\n\n  {{include_css \"notes/_libs/ui.css\"}}\n\n  <style>{{include \"../../style\" \"d-page-theme\"}}</style>\n\n  <title>boards</title>\n</head>\n\n<body data-base_url=\"{{req_path \"../../items\"}}\">\n\n  <div class=\"balebaseapp-hidden\">\n    <button type=\"submit\" form=\"new_note_content\" id=\"add_note\">add</button>\n    <a class=\"ui_button\" href=\"#\" id=\"toggle_filter-short\">short</a>\n    <a class=\"ui_button\" href=\"#\" id=\"toggle_filter-img\">show images</a>\n    <a class=\"ui_button\" href=\"#\" id=\"toggle_filter-cards\">show cards</a>\n    <a class=\"ui_button\" href=\"#\" id=\"toggle_filter-preview\">page preview</a>\n  </div> \n\n  <h1>views</h1>\n  \n  <a href=\"{{req_path \"../../items\"}}\">all</a>\n\n  <form method=\"post\" action=\"{{res_path \".\" \"{:name}\"}}\">\n    <input type=\"text\"   name=\":name\" value=\"\" autocomplete=\"off\" placeholder=\"title\">\n    <input type=\"hidden\" name=\":forward\" value=\"{{req_path \".\"}}\">\n    <input type=\"hidden\" name=\"_rt\" value=\"notes/view\">\n    <input type=\"hidden\" name=\"title\" value=\"{:name}\">\n\n    <button type=\"submit\">add</button>\n  </form>\n\n  <div class=\"sec_board-container\">\n    <table>\n      <tr>\n{{#include \".\" \"children\"}}\n        <td class=\"sec_board-view\">\n          <h1>{{_.title}}</h1>\n\n          <a href=\"{{req_path path \"edit\"}}\" target=\"_blank\">edit</a>\n          <a href=\"{{req_path path \"res-delete\"}}\" target=\"_blank\">X</a>\n\n  {{reset \"Q\" \"view_path\" path}}\n  {{#include \"../../items\" \"d-list-items\"}}\n    {{include path \"t-note-item\"}}\n  {{/include}}\n\n        </td>\n{{/include}}\n      </tr>\n    </table>\n  </div>  \n\n  <script>\n    sendWindowMessage({viewMode:'view'});\n  </script>\n\n</body>\n</html>"
      }
    },
    "plugins": {
      "_md": "1745572088266",
      "bash": {
        "_md": "1745572118534",
        "default.js": {
          "_ct": "text/javascript",
          "_pt": "resource/content",
          "_content": "(function (res, writer, ctx) {\n  let text = res._.text;\n\n  submitDataAsync(text, 'http://localhost:3001/', function(rv) {\n    writer.start('text/plain');\n    writer.write(rv);\n    writer.end();\n  });\n});"
        }
      }
    },
    "dest": {
      "_md": "1746464195422",
      "folder": {
        "_md": "1746464212770",
        "default.hbs": {
          "_ct": "text/plain",
          "_pt": "resource/content",
          "_content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n  <meta charset=\"utf-8\">\n  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n  <link rel=\"icon\" href=\"data:;base64,iVBORw0KGgo=\">\n\n  {{include_css \"notes/_libs/ui.css\"}}\n\n  <title>views</title>\n</head>\n\n<body>\n  <h1>destination folder</h1>\n\nfolder\n\n</body>\n</html>"
        },
        "execute.js": {
          "_ct": "text/javascript",
          "_pt": "resource/content",
          "_content": "(async function (res, writer, ctx) {\n  let pages = ctx.getCurrentDataPath();\n  let dest = '/temp/a';\n\n  writer.start('text/html');\n\n  if (pages) {\n    let rv = await ctx.renderResource(pages, 'print');\n    let par = new DOMParser();\n    let doc = par.parseFromString(rv.content, 'text/html');\n    let txt = await storeDocumentHTML(ctx, doc.documentElement, dest);\n\n    if (txt) {\n      await ctx.storeResource(dest+'/out.html', {_content:'<!DOCTYPE html>'+txt});\n    }\n  }\n\n  ctx.forwardRequest(dest+'.@res-list');\n  writer.end();\n})"
        }
      }
    },
    "dests": {
      "_md": "1746464460677",
      "default.hbs": {
        "_ct": "text/plain",
        "_pt": "resource/content",
        "_content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n  <meta charset=\"utf-8\">\n  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n  <link rel=\"icon\" href=\"data:;base64,iVBORw0KGgo=\">\n\n  {{include_css \"notes/_libs/ui.css\"}}\n\n  <title>views</title>\n</head>\n\n<body>\n  <h1>destinations</h1>\n\n{{#include \".\" \"children\"}}\n  <div>\n    <a href=\"{{req_path path}}\">{{_.title}}</a>\n    <a href=\"{{req_path path \"res-delete\"}}\">X</a>\n  </div>\n{{/include}}\n\n  <form method=\"post\" action=\"{{res_path \".\" \"{:name}\"}}\">\n    <input type=\"text\"   name=\":name\" value=\"\" autocomplete=\"off\" placeholder=\"title\">\n    <input type=\"hidden\" name=\":forward\" value=\"{{req_path \".\"}}\">\n    <input type=\"hidden\" name=\"_rt\" value=\"notes/dest/folder\">\n    <input type=\"hidden\" name=\"title\" value=\"{:name}\">\n\n    <button type=\"submit\">add</button>\n  </form>\n\n</body>\n</html>"
      }
    },
    "_cd": "1755326847290"
  },
  "notes": {
    "_cd": "1755327129266",
    "_md": "1755327129266",
    "item": {
      "default.hbs": {
        "_ct": "text/plain",
        "_pt": "resource/content",
        "_content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n  <meta charset=\"utf-8\">\n  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no\">\n  <link rel=\"icon\" href=\"data:;base64,iVBORw0KGgo=\">\n\n  {{include_css \"_libs/ui.css\"}}\n  {{include_css \"notes/_libs/codemirror.css\"}}\n  {{include_css \"notes/_libs/ui.css\"}}\n  \n  <style>{{include \"/content/style\" \"d-editor-theme\"}}</style>\n  <style>{{include \"/content/style\" \"d-page-theme\"}}</style>\n\n  <title>items</title>\n</head>\n\n<body class=\"page_note-item nonselectable\" data-base_url=\"{{req_path \"/content/notes/main\"}}\">\n  <div class=\"sec_balebaseapp-actions ui_group theme_dark\">\n\n    <span class=\"mode_edit-hidden\">\n      <a class=\"ui_button\" href=\"#\" id=\"show_navigation\">navigation</a>\n      <a class=\"ui_button\" target=\"_blank\" href=\"{{req_path \"/content/style\"}}\">styles</a>\n    </span>\n\n    <span class=\"sec_note-actions mode_edit-visible\">\n      <a class=\"ui_button act_popup-image-show\" href=\"{{req_path \".\" \"choose-image\"}}\" id=\"add_img\">image</a>\n      <a class=\"ui_button act_popup-tags-show\" data-pref=\"#\" href=\"{{req_path \"/content/notes/tags\" \"choose-tag\"}}\" id=\"add_tag\">tag</a>\n      <a class=\"ui_button act_popup-tags-show\" data-pref=\"@\" href=\"{{req_path \"/content/notes/refs\" \"choose-tag\"}}\" id=\"add_ref\">mention</a>\n      <a class=\"ui_button act_popup-tags-show\" href=\"{{req_path \".\" \"choose-date\"}}\" id=\"add_date\">date</a>\n      <a class=\"ui_button act_popup-link-show\" href=\"{{req_path \"/content/notes/main\" \"choose-link\"}}\" id=\"add_link\">link</a>\n    </span>\n\n    <span class=\"pull-right\">\n      <span class=\"mode_edit-hidden\">\n        <form action=\"{{req_path \"/content/notes/main\" \"search\"}}\" method=\"get\">\n          <input type=\"text\" name=\"q\" placeholder=\"search\">\n          <button type=\"submit\">search</button>\n        </form>\n\n        <a id=\"act_edit-note\" class=\"ui_button act_mode-toggle\" data-mode=\"edit\" data-mode_save=\"edit\">edit</a>\n      </span>\n\n      <span class=\"mode_edit-visible\">\n        <button type=\"submit\" id=\"act_save-note\" form=\"editor\">save</button>\n      </span>\n\n    </span>\n\n  </div>\n\n  <div class=\"sec_main-split\">\n\n    <div class=\"sec_navigation ui_group padding margins\">\n{{include \".\" \"t-sidebar\"}}\n    </div>\n\n    <div class=\"sec_editor mode_edit-visible ui_group\">\n      <div class=\"sec_actions padding\">\n\n        <span class=\"sec_note-paths\">\n          <ol class=\"ui_paths\">\n{{#include \".\" \"d-list-parents\"}}\n            <li><a href=\"{{req_path path}}\">{{or _.title name}}</a></li>\n{{/include}}\n          </ol>\n\n          <span class=\"sec_note-name\">\n            <input type=\"text\" name=\"title\" placeholder=\"page title\" value=\"{{_.title}}\" form=\"editor\">\n          </span>\n        </span>\n\n      </div>\n  \n      <div class=\"sec_note-editor selectable\">\n{{include \".\" \"t-editor\"}}\n      </div>\n    </div>\n\n    <div class=\"sec_preview mode_edit-hidden\">\n      <div class=\"sec_actions ui_group padding\">\n\n        <span class=\"sec_note-paths\">\n          <ol class=\"ui_paths\">\n{{#include \".\" \"d-list-parents\"}}\n            <li><a class=\"act_save-note-end\" href=\"{{req_path path}}\">{{or _.title _.firstline name}}</a></li>\n{{/include}}\n          </ol>\n\n          <span class=\"sec_note-name\">\n            <span class=\"ui_label sec_item-selected\">{{or _.title _.firstline name}}</span>\n          </span>\n        </span>\n      </div>\n\n      <div class=\"sec_note-preview {{_.type}}\" data-base_query_url=\"{{req_path \"/content/notes/main\" \"search\"}}\">\n        <div class=\"sec_note-main\">\n{{include \".\" \"t-preview\"}}\n        </div>\n\n        <div class=\"sec_note-secondary-actions ui_group\">\n          <a class=\"ui_button act_trigger\" data-trigger_sel=\"#act_add-page\" href=#\">add</a>\n          <span class=\"pull-right\">\n            display as:\n            <a class=\"ui_button\" href=#\">list</a>\n            <a class=\"ui_button\" href=#\">cards</a>\n          </span>\n        </div>\n\n        <div class=\"sec_note-secondary\">\n{{#include \".\" \"d-list-items\"}}\n          <div class=\"sec_note-item\">\n            <div class=\"sec_note-label ui_group\">\n              <a href=\"{{req_path path}}\">{{or _.title _.firstline name}}</a>\n            </div>\n  {{include path \"t-preview\"}}\n          </div>\n{{/include}}\n        </div>\n      </div>\n\n    </div>\n  </div>\n\n  <script>\n    initEditView();\n  </script>\n\n</body>\n</html>"
      },
      "t-editor.hbs": {
        "_ct": "text/plain",
        "_pt": "resource/content",
        "_content": "<div class=\"sec_note-editor-fields ui_group margins padding\"> \n{{include path \"t-fields\"}}\n</div>\n\n<div class=\"sec_note-editor-textarea\"> \n  <form method=\"post\" action=\"{{res_path \".\"}}\" id=\"editor\">\n    <textarea id=\"editor_textarea\"\n      name=\"text.md/_content\" \n      value=\"\" \n      autocomplete=\"off\" \n      data-image_prefix=\"{{include \".\" \"d-image-prefix\"}}/\"\n      placeholder=\"title\">{{include \".\" \"d-read-text\"}}</textarea>\n    <input type=\"hidden\" name=\":forward\" value=\"{{req_path \".\"}}\">\n    <input type=\"hidden\" name=\"_rt\" value=\"notes/item\">\n  </form>\n</div>"
      },
      "t-list.hbs": {
        "_ct": "text/plain",
        "_pt": "resource/content",
        "_content": "<ul class=\"ui_tree ui_draggable-list\">\n  <li class=\"ui_dragger-container\">\n{{#match path \"/content/notes/main\"}}\n  {{#include \"/content/notes/main\" \"object\"}}\n    <div class=\"sec_item ui_tree-item selected\">{{or _.title name}}</div>\n  {{/include}}\n{{/match}}\n{{#default}}\n  {{#include \"/content/notes/main\" \"object\"}}\n    <div class=\"sec_item ui_tree-item\"><a href=\"{{req_path \"/content/notes/main\" \"\"}}\">{{or _.title name}}</a></div>\n  {{/include}}\n{{/default}}\n\n    <ul>\n{{#include \"/content/notes/main\" \"d-list-items\"}}\n  {{include path \"t-list-item\"}}\n{{/include}}\n    </ul>\n  </li>\n\n</ul>\n\n<form method=\"post\" action=\"{{res_path \".\" \"{:name}\"}}\">\n  <input type=\"hidden\" name=\":name|newUUID\" value=\"\">\n  <input type=\"hidden\" name=\"_rt\" value=\"notes/item\">\n\n  <button id=\"act_add-page\" type=\"submit\" name=\":forward\" value=\"{{req_path \".\" \"/{:name}\" \"\"}}\">add</button>\n</form>\n\n<form method=\"post\" action=\"{{res_path \".\"}}\">\n  <input type=\"hidden\" name=\"_rt\" value=\"{{renderType}}\">\n  <input type=\"hidden\" name=\":delete\" value=\"{{res_path \".\"}}\">\n  <input type=\"hidden\" name=\":forward\" value=\"{{req_path R.DIRNAME}}\">\n{{#match path \"!=\" \"/content/notes/main\"}}\n  <button type=\"submit\" class=\"act_dialog-confirm\" data-mode_save=\"edit\" data-form=\"#editor\" data-message=\"Do you want to remove this page?\">remove</button>\n{{/match}}\n</form>"
      },
      "t-fields.hbs": {
        "_ct": "text/plain",
        "_pt": "resource/content",
        "_content": "<div class=\"sec_note-tags\">\n      \n  <h3>tags:</h3>\n  {{include path \"t-tags\"}}\n\n  <span>\n  <form method=\"post\" action=\"{{res_path \"./etags\" \"{:name}\"}}\">\n    <input type=\"hidden\" name=\"/content/tags/{:name}/title\" value=\"{:name}\">\n    <input type=\"hidden\" name=\"/content/tags/{:name}/_rt\" value=\"notes/tag\">\n\n    <input type=\"hidden\" name=\":forward\" value=\"{{R.URL}}\">\n    <button class=\"act_popup-show\" name=\":name\" data-mode_save=\"edit\" data-form=\"#editor\" data-path=\"{{req_path \"/content/notes/tags\" \"choose-tag\"}}\" type=\"button\">add</button>\n  </form>\n  </span>\n\n</div>\n\n<div>\n  <span>\n  <h3>date:</h3> \n  {{date modificationDate}}\n  </span>\n\n  <span>\n  <h3>view children as:</h3> \n\n  <select name=\"type\" form=\"editor\">\n    <option value=\"\">Collection</option>\n    <option value=\"type_doc\">Document</option>\n  </select>\n  </span>\n</div>"
      },
      "d-read-text.js": {
        "_ct": "text/javascript",
        "_pt": "resource/content",
        "_content": "(async function (res, writer, ctx) {\n  let text = await ctx.resolveResourceContent(ctx.getCurrentResourcePath()+'/text.md');\n\n  writer.write(text?text:'');\n  writer.end();\n});"
      },
      "t-list-item.hbs": {
        "_ct": "text/plain",
        "_pt": "resource/content",
        "_content": "<li class=\"ui_dragger-item ui_dragger-container {{_.type}}\" data-item_ref=\"{{path}}\">\n{{#match R.PATH path}}\n  <div class=\"sec_item ui_tree-item selected\">\n    <span>{{or _.title _.firstline name}}</span>\n{{/match}}{{#default}}\n  <div class=\"sec_item ui_tree-item \">\n    <a class=\"act_save-note-end\" href=\"{{req_path path \"\"}}\">{{or _.title _.firstline name}}</a>\n{{/default}}\n  </div>\n\n  <ul class=\"ui_draggable-list\">\n{{#include \".\" \"d-list-items\"}}\n  {{include path \"t-list-item\"}}\n{{/include}}\n  </ul>\n\n</li>"
      },
      "d-list-items.js": {
        "_ct": "text/javascript",
        "_pt": "resource/content",
        "_content": "(async function (res, writer, ctx) {\n  writer.start('object/javascript');\n\n  let rv = [];\n  let children = await ctx.listResources('.', function(a) {\n    return (a.renderType == 'notes/item');\n  });\n\n  children.sort(function(a, b) {\n    return Utils.compareNames(a.name, b.name);\n  });\n\n  writer.write(children);\n})"
      },
      "d-list-parents.js": {
        "_ct": "text/javascript",
        "_pt": "resource/content",
        "_content": "(async function (res, writer, ctx) {\n  writer.start('object/javascript');\n\n  let path = ctx.getCurrentResourcePath();\n\n  let parentResources = [];\n  let parentPaths = [];\n  let ps = Utils.split_path(path);\n  ps.pop();\n\n  while (1) {\n    let rpath = ps.join('/');\n    if (rpath == '') break;\n    \n    let r = await ctx.resolveResource('/'+rpath);\n    parentResources.unshift(r);\n\n    ps.pop();\n  }\n\n  parentResources.shift();\n  parentResources.shift();\n\n  writer.write(parentResources);\n  writer.end();\n});\n"
      },
      "d-format-text.js": {
        "_ct": "text/javascript",
        "_pt": "resource/content",
        "_content": "(async function (res, writer, ctx) {\n  let text = await ctx.resolveResourceContent(ctx.getCurrentResourcePath()+'/text.md');\n  let remap = {};\n  let c = 0;\n\n  if (!text) text = '';\n\n  let md = new marked.Marked(markedHighlight.markedHighlight({\n    emptyLangClass: 'hljs',\n    langPrefix: 'act_exec-code hljs language-',\n    highlight(code, lang, info) {\n      return code+'<div class=\"sec-code_content\">'+escape(code)+'</div>';\n    }\n  }));\n\n  text = ImageEntities.parse(text, function(word) {\n    let p = \"SDSEQWE\"+c+\"LJHG\";\n    c++\n\n    remap[p] = word;\n    return p;\n  });\n\n  for (let k in remap) {\n    let name = unescape(remap[k]);\n    let path = ctx.getCurrentResourcePath() + '/' + name;\n    let xref = await ctx.renderResource(path, 'externalize');    \n\n    text = text.replaceAll(k, xref.content);\n  }\n\n  text = TextEntities.parse(text, function(word) {\n    if (word.charAt(0) == '@' && word.length > 2) {\n      let qword = word.substr(1);\n      return `<a class=\"md-at-tag\" data-item_query=\"q=${qword}\" href=\"#\">${word}</a>`;\n    }\n    if (word.charAt(0) == '#' && word.length > 2) {\n      let qword = word.substr(1);\n      let dt = makeDateTag(qword);\n      if (dt) {\n        return `<a class=\"md-date-tag\" data-item_query=\"q=${dt}\" href=\"#\">${word}</a>`;\n      }\n      else {\n        return `<a class=\"md-hash-tag\" data-item_query=\"q=${qword}\" href=\"#\">${word}</a>`;\n      }\n    }\n  });\n\n  text = TextEntities.replaceAll(text);  \n  let html = md.parse(text);\n\n  writer.write(html);\n  writer.end();\n});"
      },
      "choose-image.hbs": {
        "_ct": "text/plain",
        "_pt": "resource/content",
        "_content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n  <meta charset=\"utf-8\">\n  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n  <link rel=\"icon\" href=\"data:;base64,iVBORw0KGgo=\">\n\n  {{include_css \"_libs/ui.css\"}}\n  {{include_css \"notes/_libs/ui.css\"}}\n\n  <title>images</title>\n</head>\n\n<body class=\"page_choose-image ui_group padding margins\">\n  <div>\n{{#include \".\" \"d-list-images\"}}\n    <span class=\"sec_thumbnail-small act_popup-item-sel\" data-item_ref=\"{{name}}/{{_.image_name}}\">\n      <img src=\"{{include path \"externalize\"}}\"></img>\n    </span>\n{{/include}}\n  </div>\n\n<div class=\"act_drop\">\n  <h2>upload image</h2>\n  \n  <form method=\"post\" enctype=\"multipart/form-data\" action=\"{{res_path \"{:image}\"}}/\">\n    <input type=\"file\" name=\":filename\" value=\"\" data-drop_type=\"file\">\n    <input type=\"hidden\" name=\":image|newUUID\" value=\"\">\n    <input type=\"hidden\" name=\"_rt\" value=\"notes/image\">\n\n    <input type=\"hidden\" name=\"image_name@:filename\" value=\"{{_.image_name}}\">\n    <input type=\"hidden\" name=\":forward\" value=\"{{req_path \".\"}}\">\n\n    <button type=\"submit\" class=\"ui_button\">add</button>\n  </form>\n</div>\n\n</body>\n</html>\n"
      },
      "d-list-images.js": {
        "_ct": "text/javascript",
        "_pt": "resource/content",
        "_content": "(async function (res, writer, ctx) {\n  writer.start('object/javascript');\n \n  let items = await ctx.listResources(ctx.getCurrentResourcePath(), (res) => {\n    return (res.renderType == 'notes/image');\n  });\n\n  writer.write(items);\n  writer.end();\n});"
      },
      "t-tags.hbs": {
        "_ct": "text/plain",
        "_pt": "resource/content",
        "_content": "{{#include \"./etags\" \"children\"}}\n  <span class=\"ui_tag\">\n    <a href=\"{{req_path \"/content/notes/main\" \"search\"}}?q={{name}}\">{{name}}</a>\n    <button class=\"ui_button\" form=\"editor\" name=\":reset\" value=\"{{res_path path}}\">X</button>\n  </span>\n{{/include}}"
      },
      "pre-store.js": {
        "_ct": "text/javascript",
        "_pt": "resource/content",
        "_content": "(async function (res, writer, ctx) {\n  let text = res['text.md/_content'];\n  let path = ctx.getCurrentRequestPath();\n  let pref = '/content/notes';\n\n  if (text) {\n    let tags = [];\n    let refs = [];\n    let dtgs = [];\n    let fline = [];\n\n    text = TextEntities.parse(text, function(word) {\n      if (word.charAt(0) == '@' && word.length > 2) {\n        refs.push(word.substr(1));\n      }\n      if (word.charAt(0) == '#' && word.length > 2) {\n        let nt = makeDateTag(word);\n        if (nt) {\n          dtgs.push(nt.substr(1));\n          if (nt != word) return nt;\n        }\n        else {\n          tags.push(word.substr(1));\n        }\n      }\n    });\n\n    let title = TextEntities.titleline(text);\n    res['firstline'] = title;\n\n    let tres = {};\n    tres[':reset'] = path+'/ctags';\n    tres[pref+'/tags/_rt'] = 'notes/tags';\n\n    for (let i = 0; i < tags.length; i++) {\n      let tag = tags[i];\n      tres[pref+'/tags/'+tag+'/title'] = tag;\n      tres[pref+'/tags/'+tag+'/_rt'] = 'notes/tag';\n\n      tres['ctags/'+tag+'/title'] = tag;\n    }\n\n    let dres = {};\n    dres[':reset'] = path+'/cdates';\n    dres[pref+'/dates/_rt'] = 'notes/tags';\n\n    for (let i = 0; i < dtgs.length; i++) {\n      let tag = dtgs[i];\n      let tm = makeTimeStampFromTag(tag);\n      if (tm) {\n        dres[pref+'/dates/'+tag+'/timedate'] = tm;\n      }\n      dres[pref+'/dates/'+tag+'/title'] = tag;\n      dres[pref+'/dates/'+tag+'/_rt'] = 'notes/tag';\n\n      dres['cdates/'+tag+'/title'] = tag;\n    }\n\n    let rres = {};\n    rres[':reset'] = path+'/crefs';\n    rres[pref+'/refs/_rt'] = 'notes/tags';\n\n    for (let i = 0; i < refs.length; i++) {\n      let tag = refs[i];\n      rres[pref+'/refs/'+tag+'/title'] = tag;\n      rres[pref+'/refs/'+tag+'/_rt'] = 'notes/tag';\n\n      rres['crefs/'+tag+'/title'] = tag;\n    }\n\n    await ctx.storeResource(path, rres);\n    await ctx.storeResource(path, tres);\n    await ctx.storeResource(path, dres);\n  }\n\n  let t = (new Date().getTime());\n\n  res['_md'] = ''+t;\n  res['_search'] = text;\n\n  writer.write(res);\n  writer.end();\n});"
      },
      "choose-link.hbs": {
        "_ct": "text/plain",
        "_pt": "resource/content",
        "_content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n  <meta charset=\"utf-8\">\n  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n  <link rel=\"icon\" href=\"data:;base64,iVBORw0KGgo=\">\n\n  {{include_css \"_libs/ui.css\"}}\n  {{include_css \"notes/_libs/ui.css\"}}\n\n  <title>links</title>\n</head>\n\n<body class=\"ui_group padding margins\">\n\n{{reset \"Q\" \"title\"}}\n{{reset \"Q\" \"href\"}}\n\n<h2>links</h2>\n  <ul class=\"ui_draggable-list\">\n{{#include \"/content/notes/main\" \"d-list-items\"}}\n  {{include path \"t-link-item\"}}\n{{/include}}\n  </ul>\n\n{{#include R.DATA_PATH \"properties\"}}\n  <form id=\"update\" method=\"post\" action=\"\">\n    <div>\n      <input type=\"text\" name=\"href\" value=\"{{or Q.href R.DATA_PATHNAME}}\" autocomplete=\"off\" placeholder=\"url\" required=\"\">\n    </div>\n    <div>\n      <input type=\"text\" name=\"title\" value=\"{{or Q.title title}}\" autocomplete=\"off\" placeholder=\"title\">\n    </div>\n    <div>\n      <button type=\"submit\" class=\"act_popup-item-sel\">change</button>\n    </div>\n  </form>\n{{/include}}\n\n</body>\n</html>\n"
      },
      "t-link-item.hbs": {
        "_ct": "text/plain",
        "_pt": "resource/content",
        "_content": "<li class=\"ui_dragger-item ui_dragger-container\">\n  <a href=\"{{req_path \"/content/notes/main\" \".@choose-link\" path \"\"}}\">{{or _.title name}}</a>\n    \n  <ul class=\"ui_draggable-list\">\n{{#include \".\" \"d-list-items\"}}\n  {{include path \"t-link-item\"}}\n{{/include}}\n  </ul>\n\n</li>"
      },
      "t-sidebar.hbs": {
        "_ct": "text/plain",
        "_pt": "resource/content",
        "_content": "  <div class=\"sec_note-list\">\n    <h3>Pages</h3>\n{{include \".\" \"t-list\"}}\n  </div>\n\n  <hr>\n\n  <div class=\"sec_note-tags\">\n    <h3>Tags</h3>\n\n    <ul>\n{{#include \"/content/notes/tags\" \"d-list-tags\"}}\n      <li>\n        <div class=\"sec_item\"><a class=\"act_save-note-end\" href=\"{{req_path \"/content/notes/main\" \"search\"}}?q={{_.title}}\">{{_.title}}</a></div>\n      </li>\n{{/include}}\n    </ul>\n\n    <a class=\"ui_button mode_edit-hidden\" target=\"_blank\" href=\"{{req_path \"/content/notes/tags\"}}\">edit</a>\n  </div>\n\n  <hr>\n\n  <div class=\"sec_note-refs\">\n    <h3>Mentions</h3>\n\n    <ul>\n{{#include \"/content/notes/refs\" \"d-list-tags\"}}\n      <li>\n        <div class=\"sec_item\"><a class=\"act_save-note-end\" href=\"{{req_path \"/content/notes/main\" \"search\"}}?q={{_.title}}\">{{_.title}}</a></div>\n      </li>\n{{/include}}\n    </ul>\n\n    <a class=\"ui_button mode_edit-hidden\" target=\"_blank\" href=\"{{req_path \"/content/notes/refs\"}}\">edit</a>\n  </div>"
      },
      "search.hbs": {
        "_ct": "text/plain",
        "_pt": "resource/content",
        "_content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n  <meta charset=\"utf-8\">\n  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1, maximum-scale=1\">\n  <link rel=\"icon\" href=\"data:;base64,iVBORw0KGgo=\">\n\n  {{include_css \"_libs/ui.css\"}}\n  {{include_css \"notes/_libs/codemirror.css\"}}\n  {{include_css \"notes/_libs/ui.css\"}}\n  \n  <style>{{include \"/content/style\" \"d-editor-theme\"}}</style>\n  <style>{{include \"/content/style\" \"d-page-theme\"}}</style>\n\n  <title>items</title>\n</head>\n\n<body class=\"page_note-search search\" data-base_url=\"{{req_path \"/content/notes/main\" \"\"}}\">\n  <div class=\"sec_balebaseapp-actions ui_group theme_dark\">\n      <a class=\"ui_button\" href=\"#\" id=\"show_navigation\">navigation</a>\n\n    <span class=\"pull-right\">\n      <form action=\"{{req_path \"/content/notes/main\"}}\" method=\"get\">\n        <input type=\"text\" name=\"q\" value=\"{{Q.q}}\" placeholder=\"search\">\n        <button type=\"submit\">search</button>\n      </form>\n      <a href=\"{{req_path \".\" \"\"}}\" class=\"ui_button\">close</a>\n    </span>\n\n  </div>\n\n  <div class=\"sec_main-split\">\n\n    <div class=\"sec_navigation ui_group padding margins\">\n{{include \".\" \"t-sidebar\"}}\n    </div>\n\n    <div class=\"sec_search\" data-base_query_url=\"{{req_path \"/content/notes/main\" \"search\"}}\">\n{{#include \".\" \"d-search-items\"}}\n      <div class=\"sec_search-item\">\n        <div class=\"ui_group sec_info\">\n\n          <ol class=\"ui_paths\">\n  {{#include path \"d-list-parents\"}}\n            <li><a href=\"{{req_path path \"\"}}\">{{or _.title name}}</a></li>\n  {{/include}}\n            <li><a class=\"sec_note-name\" href=\"{{req_path path \"\"}}\">{{or _.title _.firstline name}}</a></li>\n          </ol>\n\n  {{#include \"./etags\" \"children\"}}\n          <span class=\"ui_tag\">\n            <a href=\"{{req_path \"/content/notes/main\" \"search\"}}?q={{name}}\">{{name}}</a>\n          </span>\n  {{/include}}\n\n        </div>\n        <div class=\"markdown act_nav-item\" data-item_ref=\"{{req_path path \"\"}}\">\n  {{include path \"d-format-text\"}}\n        </div>\n      </div>\n{{/include}}\n    </div>\n\n  </div>\n\n  <script>\n  </script>\n\n</body>\n</html>"
      },
      "d-search-items.js": {
        "_ct": "text/javascript",
        "_pt": "resource/content",
        "_content": "(async function (res, writer, ctx) {\n  writer.start('object/javascript');\n  var qp = ctx.getQueryProperties();\n  var qry = '';\n  var done = {};\n\n  if (qp && qp['q']) qry = qp['q'];\n  if (!qry) {\n    var ls = await ctx.listResources('.', function(a) {\n      return (a.renderType == 'notes/item');\n    });\n\n    var rv = [];\n    ls.sort(function(a, b) {\n      return Utils.compareNames(a.name, b.name);\n    });\n    \n    writer.write(ls);\n    writer.end();\n  }\n  else {\n    var et = \"/etags/\"+qry;\n    var rt = \"/rtags/\"+qry;\n\n    var ls = await ctx.searchResources('.', qry);\n    var rv = [];\n    \n    for (var i = 0; i < ls.length; i++) {\n      var it = ls[i];\n      var z = it.path.lastIndexOf(et);\n      if (z > 0) {\n        var p = it.path.substr(0, z);\n        var lr = done[p];\n\n        if (lr) it.score++;\n        else {\n          it = await ctx.resolveResource(p);\n\n          if (it && it.renderType == 'notes/item') {\n            it.score = 1;\n            rv.push(it);\n            done[it.path] = it;\n          }\n        }\n      }\n      else if (it.renderType == 'notes/item') {\n        var lr = done[it.path];\n        if (lr) it.score++;\n        else {\n          it.score = 1;\n          rv.push(it);\n          done[it.path] = it;\n        }\n      }\n    }\n\n    writer.write(rv);\n    writer.end();\n  }\n});\n"
      },
      "delete.hbs": {
        "_ct": "text/plain",
        "_pt": "resource/content",
        "_content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n  <meta charset=\"utf-8\">\n  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0\">\n  <link rel=\"icon\" href=\"data:;base64,iVBORw0KGgo=\">\n\n  {{include_css \"_libs/ui.css\"}}\n\n  <title>delete:{{R.PATH}}</title>\n</head>\n\n<body class=\"ui_group ui_dialog margins\">\n\n  <h1 class=\"ui_label underlined\">Delete \"{{name}}\"\n    <a class=\"ui_button inline pull-right\" href=\"{{req_path \".\" \"ui-close\"}}\">X</a>\n  </h1>\n\n  <ol class=\"ui_paths\">\n    <li>HOME</li>\n{{#include \".\" \"parents\"}}\n    <li>{{name}}</li>\n{{/include}}\n    <li>{{name}}</li>\n  </ol>\n\n  <h4>Are you sure you want to delete page \"{{name}}\"?\n\n  <form method=\"post\" action=\"{{res_path \".\"}}\">\n    <input type=\"hidden\" name=\"_rt\" value=\"{{renderType}}\">\n    <input type=\"hidden\" name=\":delete\" value=\"{{res_path \".\"}}\">\n    <input type=\"hidden\" name=\":forward\" value=\"{{req_path \"/content/notes/main\" \"ui-close\"}}\">\n    <button type=\"submit\">Delete</button>\n  </form>\n  </h4>\n\n</body>\n\n</html>\n"
      },
      "d-image-prefix.js": {
        "_ct": "text/javascript",
        "_pt": "resource/content",
        "_content": "(function (res, writer, ctx) {\n  let path = ctx.getCurrentResourcePath();\n  let docid = ctx.getConfigProperty('DOC_ID');\n\n  if (docid) path = '/'+docid+path.substr(8);\n\n  writer.write(path);\n  writer.end();\n});"
      },
      "choose-date.hbs": {
        "_ct": "text/plain",
        "_pt": "resource/content",
        "_content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n  <meta charset=\"utf-8\">\n  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n  <link rel=\"icon\" href=\"data:;base64,iVBORw0KGgo=\">\n\n  {{include_css \"_libs/ui.css\"}}\n  {{include_css \"notes/_libs/ui.css\"}}\n\n  <title>links</title>\n</head>\n\n<body class=\"ui_group padding margins\">\n\n<h2>date</h2>\n\n  <form id=\"update\" method=\"post\" action=\"\">\n    <input type=\"date\" name=\"date\">\n    <button type=\"submit\" class=\"act_popup-item-sel\">change</button>\n  </form>\n\n</body>\n</html>\n"
      },
      "preview.hbs": {
        "_ct": "text/plain",
        "_pt": "resource/content",
        "_content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n  <meta charset=\"utf-8\">\n  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1, maximum-scale=1\">\n  <link rel=\"icon\" href=\"data:;base64,iVBORw0KGgo=\">\n\n  {{include_css \"_libs/ui.css\"}}\n  {{include_css \"notes/_libs/ui.css\"}}\n  \n  <style>{{include \"/content/style\" \"d-page-theme\"}}</style>\n\n  <title>preview</title>\n</head>\n\n<body class=\"page_note-item\" data-base_url=\"{{req_path \"/content/notes/main\"}}\">\n\n  <div class=\"markdown act_nav-item\">\n{{include \".\" \"d-format-text\"}}\n  </div>\n\n</body>\n</html>"
      },
      "t-preview.hbs": {
        "_ct": "text/plain",
        "_pt": "resource/content",
        "_content": "<div class=\"sec_info padding\">\n{{#include \"./etags\" \"children\"}}\n  <span class=\"ui_tag\">\n    <a href=\"{{req_path \"/content/notes/main\" \"search\"}}?q={{name}}\">{{name}}</a>\n  </span>\n{{/include}}\n</div>\n\n<div class=\"markdown act_nav-item selectable\" data-item_ref=\"{{req_path path \"edit\"}}\">\n{{include \".\" \"d-format-text\"}}\n</div>"
      },
      "edit.js": {
        "_ct": "text/javascript",
        "_pt": "resource/content",
        "_content": "(function (res, writer, ctx) {\n  let rurl = location.href;\n  rurl = rurl.substr(0, rurl.lastIndexOf('.@'));\n  \n  saveMode('edit', true);\n  ctx.forwardRequest(rurl);\n  writer.end();\n});"
      }
    },
    "_libs": {
      "_cd": "1755328061217",
      "_md": "1755328061217",
      "ui.css": {
        "_ct": "text/css",
        "_pt": "resource/content",
        "_content": ":root {\n  --side-width: 200px;\n  --background: white;\n  --navigation: #F6F6F6;\n}\n\n.theme_dark {\n  --color: gray;\n  --box-color: #C5C5C5;\n  --border-color: gray;\n  --button-color: unset;\n  --button-text: gray;\n  --link-color: red;\n  --primary-color: gray;\n  --input-color: initial;\n  --input-text: white;\n  --selection-color: Highlight;\n}\n\n#ui_popup {\n  z-index: 999;\n  border: 0;\n  position: fixed;\n  display: none;\n  top: 0;\n  right: 0;\n  height: 100%;\n  width:50%;\n  box-sizing: border-box;\n  background-color: white;\n  box-shadow: -7px 0px 60px -3px rgb(0 0 0 / 50%);\n}\n\n#ui_popup.visible {\n  animation-name: slidein;\n  animation-duration: 0.2s;\n  display: block;\n}\n\n#ui_popup-background {\n  z-index: 998;\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: black;\n  opacity: 0.1;\n}\n\nbody.mode_balebaseapp.ui_dialog {\n  margin: 0;\n  border: 0;\n}\n\nhtml:has(body.mode_balebaseapp.ui_dialog) {\n  background-color: unset;\n}\n\nbody.mode_balebaseapp .sec_balebaseapp-actions {\n  display: none;\n}\n\nbody.mode_balebaseapp .sec_main-split {\n  margin-top: 0;\n}\n\nbody.mode_balebaseapp.ui_dialog {\n  margin: 0;\n  border: 0;\n}\n\n.sec_balebaseapp-actions {\n  position: fixed;\n  touch-action: none;\n  z-index: 1;\n  top: 0px;\n  left: 0px;\n  right: 0px;\n  xheight: 30px;\n  background-color: black;\n  padding: 2px;\n  border-bottom: 2px solid darkslategray;\n}\n\nhtml:has(body.mode_balebaseapp.ui_dialog) {\n  background-color: unset;\n}\n\nbody.cm-active .sec_note-editor-textarea {\n  outline: 2px solid Highlight;\n}\n\n.sec_note-editor-textarea {\n  padding: 10px;\n  background-color: white;\n  min-height: 300px;\n  cursor: text;\n}\n\n.sec_note-editor-textarea #editor {\n  display: block;\n  width: 100%;\n}\n\n.sec_note-editor-textarea #editor textarea {\n  width: 100%;\n}\n\n.sec_note-editor {\n  background-color: beige;\n}\n\n.sec_img-frame {\n  display: inline-block;\n  overflow: hidden;\n  vertical-align: bottom;\n}\n\n.sec_img-frame img {\n  vertical-align: bottom;\n}\n\n.sec_img-frame.cropped img {\n  max-width: unset !important;\n}\n\n/*\nbody.edit .sec_note-paths a,\nbody.edit .sec_note-refs a,\nbody.edit .sec_note-editor-fields a,\nbody.edit .sec_navigation a:not(.ui_button),\nbody.edit .sec_note-tags a {\n  color: green;\n  cursor: default !important;\n  pointer-events: none !important;\n}\n\nbody.edit .selected:not(.ui_cropframe) {\n  background: gray !important;\n  cursor: default !important;\n  pointer-events: none !important;\n}\n*/\n\n.mode_edit .mode_edit-hidden {\n  display:none !important;\n}\n\nbody:not(.mode_edit) .mode_edit-visible {\n  display:none;\n}\n\n.mode_detail-visible:not(.mode_detail) {\n  display:none;\n}\n\nbody.page_note-search .sec_note-list form {\n  visibility: hidden;\n}\n\nbody.page_choose-image .sec_thumbnail-small img {\n  max-width: 300px;\n  max-height: 300px;\n} \n\nbody.page_note-search,\nbody.page_note-item {\n  margin: 0;\n}\n\n.sec_note-list {\n  border: 0;\n}\n\nul .ui_label {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n.sec_note-list .sec_item a {\n  width: 100%;\n  display: block;\n}\n\n.sec_actions .sec_item-selected {\n  font-weight: bold;\n}\n\n.sec_note-paths .ui_paths li:last-child:after {\n  color: var(--box-color);\n  content: \"\\00a0/\";\n}\n\n.sec_search-item {\n  border: 1px solid black;\n  max-height: 100px;\n  overflow: clip;\n  cursor: pointer;\n}\n\n.sec_search-item li a.sec_note-name {\n  color: black;\n  font-weight: bold;\n}\n\n.sec_preview .sec_note-main .markdown:not(:has(> *)) {\n  cursor: text;\n}\n\n.sec_preview .sec_note-main .markdown:not(:has(> *)):after {\n  content:'\\270D  click to edit...';\n  color: var(--box-color);\n  font-size: 16px;\n}\n\n.sec_search-item .markdown {\n  zoom: 0.5;\n}\n\n.sec_search-item .markdown > * {\n  margin: 0;\n}\n\n.sec_note-preview {\n  min-height: 300px;\n}\n\n.sec_note-main {\n  background: white;\n}\n\n.sec_note-secondary-actions {\n  border-top: 1px solid var(--box-color);\n  padding-top: 15px;\n  padding-left: 15px;\n  padding-right: 15px;\n}\n\n.sec_note-secondary .sec_note-item {\n  border: 1px solid gray;\n  margin-bottom: 4px;\n}\n\n.sec_note-secondary .sec_note-item .markdown {\n  display: none;\n}\n\n.sec_note-secondary .sec_note-item .sec_note-label {\n  padding: 4px;\n}\n\n.sec_note-secondary .sec_note-item .sec_note-label a {\n  text-decoration-line: none;\n  font-weight: bold;\n  color: var(--color);\n}\n\n.sec_note-secondary {\n  padding: 14px;\n}\n\n.sec_note-preview.type_doc {\n  padding: 15px;\n}\n\n.sec_note-list .ui_tree .type_doc div.ui_tree-item:before {\n  visibility: visible;\n}\n\n.sec_note-list .ui_tree .type_doc > div.ui_tree-item:before {\n  content: '\\23F9';\n}\n\n.sec_note-list .ui_tree .type_doc {\n  color: gray;\n}\n\n.sec_note-preview.type_doc .sec_note-secondary {\n  padding: unset;\n}\n\n.sec_note-preview.type_doc .sec_note-secondary .sec_note-item {\n  border: unset;\n  margin: unset;\n}\n\n.sec_note-preview.type_doc .sec_note-main .markdown,\n.sec_note-preview.type_doc .sec_note-item .markdown {\n  padding: unset;\n}\n\n.sec_note-preview.type_doc .sec_note-primary .sec_note-item,\n.sec_note-preview.type_doc .sec_note-secondary .sec_note-item {\n  padding: unset;\n}\n\n.sec_note-preview.type_doc .sec_note-secondary .sec_note-label,\n.sec_note-preview.type_doc .sec_note-secondary-actions,\n.sec_note-preview.type_doc .sec_note-secondary .sec_info {\n  display: none;\n}\n\n.sec-code_content {\n  display: none;\n}\n\n.sec_info:not(:has(> *)) {\n  display: none;\n}\n\n.sec_note-preview.type_doc .sec_note-secondary .markdown {\n  display: block;\n}\n\n.sec_actions {\n  border-bottom: 1px solid var(--box-color);\n}\n\nhtml,body {\n  height: 100%;\n  background-color: var(--background);\n}\n\nbody.mode_balebaseapp .sec_main-split {\n  top: 0;\n}\n\n.sec_main-split {\n  position: absolute;\n  top: 30px;\n  bottom: 0;\n  left: 0;\n  right: 0;\n}\n\n.mode_sidebar .sec_navigation {\n  display: block;\n  z-index: 1;\n}\n\n.sec_navigation {\n  position: absolute;\n  background-color: var(--navigation);\n  width: 100%;\n  top: 0px;\n  bottom: 0;\n  overflow-y: auto;\n  display: none;\n  border-right: 1px solid var(--box-color);\n}\n\n.sec_preview,\n.sec_search,\n.sec_editor {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  right: 0;\n  left: 0;\n  overflow-y: auto;\n}\n\nbody.navigation .sec_navigation {\n  width: 100%;\n  display: block;\n  animation: slide-out 0.2s;\n  animation-timing-function: ease-in;\n  z-index:1;\n}\n\n@keyframes slide-out {\n  from { \n    transform: translateX(-50%);\n    opacity: 0;\n  }\n  to { \n    transform: translateX(1); \n    opacity: 1;\n  }\n}\n\n@media (pointer:coarse) {\n  .sec_balebaseapp-actions {\n    position: absolute;\n  }\n\n  .sec_navigation,\n  .sec_preview,\n  .sec_search,\n  .sec_editor {\n    bottom: unset;\n  }\n}\n\n@media screen and (min-width: 750px) {\n  .sec_navigation {\n    width: 250px;\n    display: block;\n  }\n  \n  .sec_editor,\n  .sec_search,\n  .sec_preview {\n    left: 250px;\n  }\n}"
      },
      "codemirror.css": {
        "_ct": "text/css",
        "_pt": "resource/content",
        "_content": "/*\n.CodeMirror .CodeMirror-widget a {\n  text-wrap: nowrap;\n}\n\n.CodeMirror .CodeMirror-code .cm-link {\n  text-wrap: nowrap;\n  overflow: hidden;\n}\n*/\n\n/* BASICS */\n\n.CodeMirror {\n  /* Set height, width, borders, and global font properties here */\n  /*font-family: monospace;*/\n  /*height: 300px;*/\n  color: black;\n  direction: ltr;\n}\n\n/* PADDING */\n\n.CodeMirror-lines {\n  padding: 4px 0; /* Vertical padding around content */\n}\n.CodeMirror pre.CodeMirror-line,\n.CodeMirror pre.CodeMirror-line-like {\n  padding: 0 4px; /* Horizontal padding of content */\n}\n\n.CodeMirror-scrollbar-filler, .CodeMirror-gutter-filler {\n  background-color: white; /* The little square between H and V scrollbars */\n}\n\n/* GUTTER */\n\n.CodeMirror-gutters {\n  border-right: 1px solid #ddd;\n  background-color: #f7f7f7;\n  white-space: nowrap;\n}\n.CodeMirror-linenumbers {}\n.CodeMirror-linenumber {\n  padding: 0 3px 0 5px;\n  min-width: 20px;\n  text-align: right;\n  color: #999;\n  white-space: nowrap;\n}\n\n.CodeMirror-guttermarker { color: black; }\n.CodeMirror-guttermarker-subtle { color: #999; }\n\n/* CURSOR */\n\n.CodeMirror-cursor {\n  border-left: 1px solid black;\n  border-right: none;\n  width: 0;\n}\n/* Shown when moving in bi-directional text */\n.CodeMirror div.CodeMirror-secondarycursor {\n  border-left: 1px solid silver;\n}\n.cm-fat-cursor .CodeMirror-cursor {\n  width: auto;\n  border: 0 !important;\n  background: Highlight;\n}\n.cm-fat-cursor div.CodeMirror-cursors {\n  z-index: 1;\n}\n.cm-fat-cursor-mark {\n  background-color: rgba(20, 255, 20, 0.5);\n  -webkit-animation: blink 1.06s steps(1) infinite;\n  -moz-animation: blink 1.06s steps(1) infinite;\n  animation: blink 1.06s steps(1) infinite;\n}\n.cm-animate-fat-cursor {\n  width: auto;\n  -webkit-animation: blink 1.06s steps(1) infinite;\n  -moz-animation: blink 1.06s steps(1) infinite;\n  animation: blink 1.06s steps(1) infinite;\n  background-color: Highlight;\n}\n@-moz-keyframes blink {\n  0% {}\n  50% { background-color: transparent; }\n  100% {}\n}\n@-webkit-keyframes blink {\n  0% {}\n  50% { background-color: transparent; }\n  100% {}\n}\n@keyframes blink {\n  0% {}\n  50% { background-color: transparent; }\n  100% {}\n}\n\n/* Can style cursor different in overwrite (non-insert) mode */\n.CodeMirror-overwrite .CodeMirror-cursor {}\n\n.cm-tab { display: inline-block; text-decoration: inherit; }\n\n.CodeMirror-rulers {\n  position: absolute;\n  left: 0; right: 0; top: -50px; bottom: 0;\n  overflow: hidden;\n}\n.CodeMirror-ruler {\n  border-left: 1px solid #ccc;\n  top: 0; bottom: 0;\n  position: absolute;\n}\n\n/* DEFAULT THEME */\n/* XXX\n.cm-s-default .cm-header {color: blue;}\n.cm-s-default .cm-quote {color: #090;}\n.cm-negative {color: #d44;}\n.cm-positive {color: #292;}\n.cm-header, .cm-strong {font-weight: bold;}\n.cm-em {font-style: italic;}\n.cm-link {text-decoration: underline;}\n.cm-strikethrough {text-decoration: line-through;}\n\n.cm-s-default .cm-keyword {color: #708;}\n.cm-s-default .cm-atom {color: #219;}\n.cm-s-default .cm-number {color: #164;}\n.cm-s-default .cm-def {color: #00f;}\n.cm-s-default .cm-variable,\n.cm-s-default .cm-punctuation,\n.cm-s-default .cm-property,\n.cm-s-default .cm-operator {}\n.cm-s-default .cm-variable-2 {color: #05a;}\n.cm-s-default .cm-variable-3, .cm-s-default .cm-type {color: #085;}\n.cm-s-default .cm-comment {color: #a50;}\n.cm-s-default .cm-string {color: #a11;}\n.cm-s-default .cm-string-2 {color: #f50;}\n.cm-s-default .cm-meta {color: #555;}\n.cm-s-default .cm-qualifier {color: #555;}\n.cm-s-default .cm-builtin {color: #30a;}\n.cm-s-default .cm-bracket {color: #997;}\n.cm-s-default .cm-tag {color: #170;}\n.cm-s-default .cm-attribute {color: #00c;}\n.cm-s-default .cm-hr {color: #999;}\n.cm-s-default .cm-link {color: #00c;}\n*/\n\n.CodeMirror-line.cm-align-center {\n  text-align: center !important;\n}\n\n.CodeMirror-line.cm-align-right {\n  text-align: right !important;\n}\n\n.cm-link {\n  cursor: pointer;\n}\n\n.cm-task-open, .cm-task-closed {\n  cursor: pointer;\n}\n\n.CodeMirror .cm-spell-error {\n  border-bottom: 1px dotted red;\n}\n\n.cm-s-default .cm-error {color: #f00;}\n.cm-invalidchar {color: #f00;}\n\n.CodeMirror-composing { border-bottom: 2px solid; }\n\n/* Default styles for common addons */\n\ndiv.CodeMirror span.CodeMirror-matchingbracket {color: #0b0;}\ndiv.CodeMirror span.CodeMirror-nonmatchingbracket {color: #a22;}\n.CodeMirror-matchingtag { background: rgba(255, 150, 0, .3); }\n.CodeMirror-activeline-background {background: #e8f2ff;}\n\n/* STOP */\n\n/* The rest of this file contains styles related to the mechanics of\n   the editor. You probably shouldn't touch them. */\n\n.CodeMirror {\n  position: relative;\n  overflow: hidden;\n  background: white;\n}\n\n.CodeMirror-scroll {\n  overflow: scroll !important; /* Things will break if this is overridden */\n  /* 50px is the magic margin used to hide the element's real scrollbars */\n  /* See overflow: hidden in .CodeMirror */\n  margin-bottom: -50px; margin-right: -50px;\n  padding-bottom: 50px;\n  height: 100%;\n  outline: none; /* Prevent dragging from highlighting the element */\n  position: relative;\n}\n.CodeMirror-sizer {\n  position: relative;\n  border-right: 50px solid transparent;\n}\n\n/* The fake, visible scrollbars. Used to force redraw during scrolling\n   before actual scrolling happens, thus preventing shaking and\n   flickering artifacts. */\n.CodeMirror-vscrollbar, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-gutter-filler {\n  position: absolute;\n  z-index: 6;\n  display: none;\n  outline: none;\n}\n.CodeMirror-vscrollbar {\n  right: 0; top: 0;\n  overflow-x: hidden;\n  overflow-y: scroll;\n}\n.CodeMirror-hscrollbar {\n  bottom: 0; left: 0;\n  overflow-y: hidden;\n  overflow-x: scroll;\n}\n.CodeMirror-scrollbar-filler {\n  right: 0; bottom: 0;\n}\n.CodeMirror-gutter-filler {\n  left: 0; bottom: 0;\n}\n\n.CodeMirror-gutters {\n  position: absolute; left: 0; top: 0;\n  min-height: 100%;\n  z-index: 3;\n}\n.CodeMirror-gutter {\n  white-space: normal;\n  height: 100%;\n  display: inline-block;\n  vertical-align: top;\n  margin-bottom: -50px;\n}\n.CodeMirror-gutter-wrapper {\n  position: absolute;\n  z-index: 4;\n  background: none !important;\n  border: none !important;\n}\n.CodeMirror-gutter-background {\n  position: absolute;\n  top: 0; bottom: 0;\n  z-index: 4;\n}\n.CodeMirror-gutter-elt {\n  position: absolute;\n  cursor: default;\n  z-index: 4;\n}\n.CodeMirror-gutter-wrapper ::selection { background-color: transparent }\n.CodeMirror-gutter-wrapper ::-moz-selection { background-color: transparent }\n\n.CodeMirror-lines {\n  cursor: text;\n  min-height: 1px; /* prevents collapsing before first draw */\n}\n.CodeMirror pre.CodeMirror-line,\n.CodeMirror pre.CodeMirror-line-like {\n  /* Reset some styles that the rest of the page might have set */\n  -moz-border-radius: 0; -webkit-border-radius: 0; border-radius: 0;\n  border-width: 0;\n  /*background: transparent;*/ //XXX\n  font-family: inherit;\n  font-size: inherit;\n  margin: 0;\n  white-space: pre;\n  word-wrap: normal;\n  line-height: inherit;\n  color: inherit;\n  z-index: 2;\n  position: relative;\n  overflow: visible;\n  -webkit-tap-highlight-color: transparent;\n  -webkit-font-variant-ligatures: contextual;\n  font-variant-ligatures: contextual;\n}\n.CodeMirror-wrap pre.CodeMirror-line,\n.CodeMirror-wrap pre.CodeMirror-line-like {\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  word-break: normal;\n}\n\n.CodeMirror-linebackground {\n  position: absolute;\n  left: 0; right: 0; top: 0; bottom: 0;\n  z-index: 0;\n}\n\n.CodeMirror-linewidget {\n  position: relative;\n  z-index: 2;\n  padding: 0.1px; /* Force widget margins to stay inside of the container */\n}\n\n.CodeMirror-widget {\n  display: inline-block;\n}\n\n.CodeMirror-rtl pre { direction: rtl; }\n\n.CodeMirror-code {\n  outline: none;\n}\n\n/* Force content-box sizing for the elements where we expect it */\n.CodeMirror-scroll,\n.CodeMirror-sizer,\n.CodeMirror-gutter,\n.CodeMirror-gutters,\n.CodeMirror-linenumber {\n  -moz-box-sizing: content-box;\n  box-sizing: content-box;\n}\n\n.CodeMirror-measure {\n  position: absolute;\n  width: 100%;\n  height: 0;\n  overflow: hidden;\n  visibility: hidden;\n}\n\n.CodeMirror-cursor {\n  position: absolute;\n  pointer-events: none;\n}\n.CodeMirror-measure pre { position: static; }\n\ndiv.CodeMirror-cursors {\n  visibility: hidden;\n  position: relative;\n  z-index: 3;\n}\ndiv.CodeMirror-dragcursors {\n  visibility: visible;\n}\n\n.CodeMirror-focused div.CodeMirror-cursors {\n  visibility: visible;\n}\n\n.CodeMirror-selected { background: SelectedItem; }\n.CodeMirror-focused .CodeMirror-selected { background: Highlight; }\n.CodeMirror-crosshair { cursor: crosshair; }\n.CodeMirror-line::selection, .CodeMirror-line > span::selection, .CodeMirror-line > span > span::selection { background: Highlight; }\n.CodeMirror-line::-moz-selection, .CodeMirror-line > span::-moz-selection, .CodeMirror-line > span > span::-moz-selection { background: Highlight; }\n\n.cm-searching {\n  background-color: #ffa;\n  background-color: rgba(255, 255, 0, .4);\n}\n\n/* Used to force a border model for a node */\n.cm-force-border { padding-right: .1px; }\n\n@media print {\n  /* Hide the cursor when printing */\n  .CodeMirror div.CodeMirror-cursors {\n    visibility: hidden;\n  }\n}\n\n/* See issue #2901 */\n.cm-tab-wrap-hack:after { content: ''; }\n\n/* Help users use markselection to safely style text background */\nspan.CodeMirror-selectedtext { background: none; }\n"
      }
    },
    "tags": {
      "_md": "1755378896142",
      "d-list-tags.js": {
        "_ct": "text/javascript",
        "_pt": "resource/content",
        "_content": "(async function (res, writer, ctx) {\n  writer.start('object/javascript');\n\n  let items = await ctx.listResources(ctx.getCurrentResourcePath(), (it) => { \n    if(it.renderType == 'notes/tag') {\n      return true;\n    }\n    else {\n      return false;\n    }\n  });\n\n  writer.write(items);\n  writer.end();\n});"
      },
      "choose-tag.hbs": {
        "_ct": "text/plain",
        "_pt": "resource/content",
        "_content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n  <meta charset=\"utf-8\">\n  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n  <link rel=\"icon\" href=\"data:;base64,iVBORw0KGgo=\">\n\n  {{include_css \"_libs/ui.css\"}}\n  {{include_css \"notes/_libs/ui.css\"}}\n\n  <title>items</title>\n</head>\n\n<body class=\"ui_group padding margins\">\n  <h2>{{_.title}}</h2>\n\n{{#include \".\" \"d-list-tags\"}}\n  <div>\n    <a class=\"act_popup-item-sel\" data-item_ref=\"{{_.title}}\" href=\"#\">{{_.title}}</a>\n    <button class=\"ui_button inline\" form=\"delete\" name=\":delete\" value=\"{{res_path path}}\">X</button>\n  </div>\n{{/include}}\n\n  <form id=\"delete\" class=\"hidden\" method=\"post\" action=\"{{res_path \".\"}}\">\n    <input type=\"hidden\" name=\":forward\" value=\"{{req_path \".\"}}\">\n  </form>\n\n  <form id=\"update\" method=\"post\" action=\"{{res_path \".\" \"/{:name}\"}}\">\n    <input type=\"text\"   name=\":name\" value=\"\" autocomplete=\"off\" placeholder=\"title\" required>\n    <input type=\"hidden\" name=\":forward\" value=\"{{req_path \".\"}}\">\n    <input type=\"hidden\" name=\"_rt\" value=\"notes/tag\">\n    <input type=\"hidden\" name=\"title\" value=\"{:name}\">\n\n    <button type=\"submit\">add</button>\n  </form>\n\n</body>\n</html>\n"
      },
      "d-list-dates.js": {
        "_ct": "text/javascript",
        "_pt": "resource/content",
        "_content": "(async function (res, writer, ctx) {\n  writer.start('object/javascript');\n  let items = [];\n\n  items.push({\n    separator:true,\n    _:{\n     title:'today',\n     timedate:(new Date().getTime())\n   }\n  });\n\n  await ctx.listResources(ctx.getCurrentResourcePath(), (it) => { \n    if(it.renderType == 'notes/tag') {\n      items.push(it);\n    }\n    return false;\n  });\n\n  items = items.sort(function(a, b) {\n    let av = a._['timedate'];\n    let bv = b._['timedate'];\n\n    if (!av) av = 0;\n    if (!bv) bv = 0;\n\n    return av - bv;\n  });\n\n  writer.write(items);\n  writer.end();\n});"
      },
      "_cd": "1755378896142",
      "default.hbs": {
        "_ct": "text/plain",
        "_pt": "resource/content",
        "_content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n  <meta charset=\"utf-8\">\n  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n  <link rel=\"icon\" href=\"data:;base64,iVBORw0KGgo=\">\n\n  {{include_css \"_libs/ui.css\"}}\n  {{include_css \"notes/_libs/ui.css\"}}\n\n  <title>Edit Tags</title>\n</head>\n\n<body class=\"ui_dialog ui_group\">\n  <h1>{{_.title}}</h1>\n\n{{#include \".\" \"d-list-tags\"}}\n  <div>\n    <a class=\"act_popup-item-sel\" data-item_ref=\"{{_.title}}\" href=\"#\">{{_.title}}</a>\n    <button class=\"ui_button inline\" form=\"delete\" name=\":delete\" value=\"{{res_path path}}\">X</button>\n  </div>\n{{/include}}\n\n  <form id=\"delete\" class=\"hidden\" method=\"post\" action=\"{{res_path \".\"}}\">\n    <input type=\"hidden\" name=\":forward\" value=\"{{req_path \".\"}}\">\n  </form>\n\n  <form method=\"post\" action=\"{{res_path \".\" \"/{:name}\"}}\">\n    <input type=\"text\"   name=\":name\" value=\"\" autocomplete=\"off\" placeholder=\"title\" required>\n    <input type=\"hidden\" name=\":forward\" value=\"{{req_path \".\"}}\">\n    <input type=\"hidden\" name=\"_rt\" value=\"notes/tag\">\n    <input type=\"hidden\" name=\"title\" value=\"{:name}\">\n\n    <button type=\"submit\">add</button>\n  </form>\n\n</body>\n</html>\n"
      }
    },
    "image": {
      "_md": "1755379690694",
      "default.hbs": {
        "_ct": "text/plain",
        "_pt": "resource/content",
        "_content": "<img src=\"{{include _.image_name \"externalize\"}}\">"
      },
      "externalize.js": {
        "_ct": "text/javascript",
        "_pt": "resource/content",
        "_content": "(function (res, writer, ctx) {\nconsole.log(\"xxxx\");\n  let path = ctx.getCurrentResourcePath()+'/'+res._['image_name'];\n  ctx.renderResource(path, null, 'externalize').then((r) => {\n    writer.start(r.contentType);\n    writer.write(r.content);\n    writer.end();\n  });\n});\n"
      },
      "_cd": "1755379690694"
    },
    "search.js": {
      "_ct": "text/plain",
      "_pt": "resource/content",
      "_content": "(function (res, writer, ctx) {\n  let args = ctx.getQueryProperties();\n  let rurl = location.href;\n\n  rurl = rurl.substr(0, rurl.lastIndexOf('.@'));\n\n  if (args && args['q']) {\n    let q = args['q'];\n    rurl += '/items?q='+escape(q);\n  }\n  else {\n    rurl += '/items';\n  }\n\n  ctx.forwardRequest(rurl);\n  writer.end();\n});"
    }
  }
}